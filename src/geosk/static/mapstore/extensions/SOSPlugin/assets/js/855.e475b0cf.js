(self.webpackChunkSOSPlugin=self.webpackChunkSOSPlugin||[]).push([[855],{92855:function(t,e,r){"use strict";var n=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.SldStyleParser=void 0;var o=r(91603),i=r(88042),s=r(69012),a=r(33437),l=r(3904),p=r(8364),c=function(){function t(t){this.title="SLD Style Parser",this._numericFilterFields=[],this._boolFilterFields=[],this._forceCasting=!1,this._prettyOutput=!0,this.getTextSymbolizerLabelFromSldSymbolizer=function(t){var e="",r=a(t,"Literal"),n=a(t,"PropertyName"),o="Literal"===Object.keys(t)[0];if(n&&n.length>0){var i=n.map((function(t){return"{{".concat(t,"}}")}));r&&r.length>0?o?(r.forEach((function(t,r){e+="".concat(t),i[r]&&(e+="".concat(i[r]))})),i.length>r.length&&(e+=i.join(""))):(i.forEach((function(t,n){e+="".concat(t),r[n]&&(e+="".concat(r[n]))})),r.length>i.length&&(e+=r.join(""))):e=i.join("")}else r&&r.length>0?e=r.join(""):"string"==typeof t&&(e=t);return e},this.getSldLabelFromTextSymbolizer=function(t){var e=new RegExp("\\{\\{.*?\\}\\}","g"),r=t.match(e),n=t.startsWith("{{");if(r){var o=t.split(e),i=[];o.forEach((function(t){0!==t.length&&i.push(t)}));var s=r.map((function(t){return t.slice(2,t.length-2)}));return n?[{"ogc:PropertyName":s,"ogc:Literal":i}]:[{"ogc:Literal":i,"ogc:PropertyName":s}]}return[{"ogc:Literal":[t]}]},Object.assign(this,t)}return Object.defineProperty(t.prototype,"numericFilterFields",{get:function(){return this._numericFilterFields},set:function(t){this._numericFilterFields=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"boolFilterFields",{get:function(){return this._boolFilterFields},set:function(t){this._boolFilterFields=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"forceCasting",{get:function(){return this._forceCasting},set:function(t){this._forceCasting=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"prettyOutput",{get:function(){return this._prettyOutput},set:function(t){this._prettyOutput=t},enumerable:!1,configurable:!0}),t.keysByValue=function(t,e){return Object.keys(t).filter((function(r){return t[r]===e}))},t.prototype.tagNameProcessor=function(t){var e=new RegExp(/(?!xmlns)^.*:/);return t.replace(e,"")},t.prototype.getStyleNameFromSldObject=function(t){var e=a(t,"StyledLayerDescriptor.NamedLayer[0].UserStyle[0].Title[0]"),r=a(t,"StyledLayerDescriptor.NamedLayer[0].Name[0]");return e||r||""},t.prototype.getStrMatchesFunctionFilterFromSldFilter=function(t){var e=a(t,"Function[0].PropertyName[0]"),r=a(t,"Function[0].Literal[0]");return["FN_strMatches",e,new RegExp(r)]},t.prototype.getFunctionFilterFromSldFilter=function(t){return a(t,"Function[0].$.name"),this.getStrMatchesFunctionFilterFromSldFilter(t)},t.prototype.getFilterFromOperatorAndComparison=function(e,r){var o,s=this;if(Object.keys(t.comparisonMap).includes(e)){var a=t.comparisonMap[e],l=!!r.Function,p=l?this.getFunctionFilterFromSldFilter(r):r.PropertyName[0],c=null;if("PropertyIsNull"!==e&&(c=r.Literal[0]),(this.forceCasting||l||-1!==this.numericFilterFields.indexOf(p))&&!Number.isNaN(parseFloat(c))&&(c=parseFloat(c)),i(c)){var h=c.toLowerCase();(this.forceCasting||l||-1!==this.boolFilterFields.indexOf(p))&&("false"===h&&(c=!1),"true"===h&&(c=!0))}o=[a,p,c]}else if(Object.keys(t.combinationMap).includes(e)){var u=t.combinationMap[e],f=[];Object.keys(r).forEach((function(t){1===r[t].length?f.push(s.getFilterFromOperatorAndComparison(t,r[t][0])):r[t].forEach((function(e){f.push(s.getFilterFromOperatorAndComparison(t,e))}))})),o=n([u],f,!0)}else{if(!Object.keys(t.negationOperatorMap).includes(e))throw new Error("No Filter detected");var d=t.negationOperatorMap[e],y=Object.keys(r)[0],m=r[y][0];o=[d,this.getFilterFromOperatorAndComparison(y,m)]}return o},t.prototype.getFilterFromRule=function(t){var e=t.Filter;if(e){var r=e[0],n=Object.keys(r).find((function(t,e){return"$"!==t}));if(n){var o=r[n][0];return this.getFilterFromOperatorAndComparison(n,o)}}},t.prototype.getScaleDenominatorFromRule=function(t){var e={};return t.MinScaleDenominator&&(e.min=parseFloat(t.MinScaleDenominator[0])),t.MaxScaleDenominator&&(e.max=parseFloat(t.MaxScaleDenominator[0])),e.min||e.max?e:void 0},t.prototype.getMarkSymbolizerFromSldSymbolizer=function(t){var e=a(t,"Graphic[0].Mark[0].WellKnownName[0]"),r=a(t,"Graphic[0].Mark[0].Stroke[0].CssParameter")||[];0===r.length&&(r=a(t,"Graphic[0].Mark[0].Stroke[0].SvgParameter")||[]);var n=a(t,"Graphic[0].Opacity[0]"),o=a(t,"Graphic[0].Size[0]"),i=a(t,"Graphic[0].Rotation[0]"),s=a(t,"Graphic[0].Mark[0].Fill[0].CssParameter")||[];0===s.length&&(s=a(t,"Graphic[0].Mark[0].Fill[0].SvgParameter")||[]);var l=s.findIndex((function(t){return"fill"===t.$.name})),p=a(t,"Graphic[0].Mark[0].Fill[0].CssParameter["+l+"]._");if(!p){var c=a(t,"Graphic[0].Mark[0].Fill[0].SvgParameter["+l+"]._");c&&(p=c)}var h=s.findIndex((function(t){return"fill-opacity"===t.$.name})),u=a(t,"Graphic[0].Mark[0].Fill[0].CssParameter["+h+"]._"),f={kind:"Mark"};switch(n&&(f.opacity=parseFloat(n)),u&&(f.fillOpacity=parseFloat(u)),p&&(f.color=p),i&&(f.rotate=parseFloat(i)),o&&(f.radius=parseFloat(o)/2),e){case"circle":case"square":case"triangle":case"star":case"cross":case"x":var d=e.charAt(0).toUpperCase()+e.slice(1);f.wellKnownName=d;break;case"shape://vertline":case"shape://horline":case"shape://slash":case"shape://backslash":case"shape://dot":case"shape://plus":case"shape://times":case"shape://oarrow":case"shape://carrow":f.wellKnownName=e;break;default:throw new Error("MarkSymbolizer cannot be parsed. Unsupported WellKnownName.")}return r.forEach((function(t){switch(t.$.name){case"stroke":f.strokeColor=t._;break;case"stroke-width":f.strokeWidth=parseFloat(t._);break;case"stroke-opacity":f.strokeOpacity=parseFloat(t._)}})),f},t.prototype.getIconSymbolizerFromSldSymbolizer=function(t){var e={kind:"Icon",image:a(t,"Graphic[0].ExternalGraphic[0].OnlineResource[0]").$["xlink:href"]},r=a(t,"Graphic[0].Opacity[0]"),n=a(t,"Graphic[0].Size[0]"),o=a(t,"Graphic[0].Rotation[0]");return void 0!==r&&(e.opacity=r),n&&(e.size=parseFloat(n)),o&&(e.rotate=parseFloat(o)),e},t.prototype.getPointSymbolizerFromSldSymbolizer=function(t){var e={},r=a(t,"Graphic[0].Mark[0].WellKnownName[0]");return a(t,"Graphic[0].ExternalGraphic[0]")?e=this.getIconSymbolizerFromSldSymbolizer(t):(r||l(t,"Graphic[0].Mark[0].WellKnownName[0]","square"),e=this.getMarkSymbolizerFromSldSymbolizer(t)),e},t.prototype.getLineSymbolizerFromSldSymbolizer=function(t){var e=this,r={kind:"Line"},n=Object.keys(a(t,"Stroke[0]"))||[];if(n.length<1)throw new Error("LineSymbolizer cannot be parsed. No Stroke detected");n.forEach((function(n){switch(n){case"CssParameter":case"SvgParameter":var o=a(t,"Stroke[0].CssParameter")||[];if(0===o.length&&(o=a(t,"Stroke[0].SvgParameter")||[]),o.length<1)throw new Error("LineSymbolizer can not be parsed. No CssParameters detected.");o.forEach((function(t){var e=t.$.name,n=t._;switch(e){case"stroke":r.color=n;break;case"stroke-width":r.width=parseFloat(n);break;case"stroke-opacity":r.opacity=parseFloat(n);break;case"stroke-linejoin":r.join="mitre"===n?"miter":n;break;case"stroke-linecap":r.cap=n;break;case"stroke-dasharray":var o=n.split(" ").map((function(t){return parseFloat(t)}));r.dasharray=o;break;case"stroke-dashoffset":r.dashOffset=parseFloat(n)}}));break;case"GraphicStroke":r.graphicStroke=e.getPointSymbolizerFromSldSymbolizer(t.Stroke[0].GraphicStroke[0]);break;case"GraphicFill":r.graphicFill=e.getPointSymbolizerFromSldSymbolizer(t.Stroke[0].GraphicFill[0])}}));var o=a(t,"PerpendicularOffset[0]");return void 0!==o&&(r.perpendicularOffset=Number(o)),r},t.prototype.getFillSymbolizerFromSldSymbolizer=function(t){var e={kind:"Fill"},r=a(t,"Fill[0].CssParameter")||[];0===r.length&&(r=a(t,"Fill[0].SvgParameter")||[]);var n=a(t,"Stroke[0].CssParameter")||[];0===n.length&&(n=a(t,"Stroke[0].SvgParameter")||[]);var o=a(t,"Fill[0].GraphicFill[0]");return o&&(e.graphicFill=this.getPointSymbolizerFromSldSymbolizer(o)),r.forEach((function(t){var r=t.$.name,n=t._;switch(r){case"fill":e.color=n;break;case"fill-opacity":e.fillOpacity=parseFloat(n)}})),e.color||(e.opacity=0),n.forEach((function(t){var r=t.$.name,n=t._;if("stroke"===r)e.outlineColor=n;else if("stroke-width"===r)e.outlineWidth=parseFloat(n);else if("stroke-opacity"===r)e.outlineOpacity=parseFloat(n);else if("stroke-dasharray"===r){var o=n.split(" "),i=[];o.forEach((function(t){i.push(parseFloat(t))})),e.outlineDasharray=i}})),e},t.prototype.getColorMapFromSldColorMap=function(t){var e={},r=a(t,"$.type");e.type=r||"ramp";var n=a(t,"$.extended");n&&(e.extended="true"===n);var o=a(t,"ColorMapEntry");if(Array.isArray(o)){var i=o.map((function(t){var e=a(t,"$.color");if(!e)throw new Error("Cannot parse ColorMapEntries. color is undefined.");var r=a(t,"$.quantity");r&&(r=parseFloat(r));var n=a(t,"$.label"),o=a(t,"$.opacity");return o&&(o=parseFloat(o)),{color:e,quantity:r,label:n,opacity:o}}));e.colorMapEntries=i}return e},t.prototype.getContrastEnhancementFromSldContrastEnhancement=function(t){var e={},r=void 0!==t.Histogram,n=void 0!==t.Normalize;if(r&&n)throw new Error("Cannot parse ContrastEnhancement. Histogram and Normalize\n      are mutually exclusive.");r?e.enhancementType="histogram":n&&(e.enhancementType="normalize");var o=a(t,"GammaValue[0]");return o&&(o=parseFloat(o)),e.gammaValue=o,e},t.prototype.getChannelFromSldChannel=function(t){var e={sourceChannelName:a(t,"SourceChannelName[0]")},r=a(t,"ContrastEnhancement[0]");return r&&(e.contrastEnhancement=this.getContrastEnhancementFromSldContrastEnhancement(r)),e},t.prototype.getChannelSelectionFromSldChannelSelection=function(t){var e,r=a(t,"RedChannel[0]"),n=a(t,"BlueChannel[0]"),o=a(t,"GreenChannel[0]"),i=a(t,"GrayChannel[0]");if(i&&r&&n&&o)throw new Error("Cannot parse ChannelSelection. RGB and Grayscale are mutually exclusive");if(i)e={grayChannel:this.getChannelFromSldChannel(i)};else{if(!(r&&o&&n))throw new Error("Cannot parse ChannelSelection. Red, Green and Blue channels must be defined.");e={redChannel:this.getChannelFromSldChannel(r),blueChannel:this.getChannelFromSldChannel(n),greenChannel:this.getChannelFromSldChannel(o)}}return e},t.prototype.getRasterSymbolizerFromSldSymbolizer=function(t){var e={kind:"Raster"},r=a(t,"Opacity[0]");r&&(r=parseFloat(r),e.opacity=r);var n=a(t,"ColorMap")||[];if(n.length>0){var o=this.getColorMapFromSldColorMap(n[0]);e.colorMap=o}var i=a(t,"ChannelSelection")||[];if(i.length>0){var s=this.getChannelSelectionFromSldChannelSelection(i[0]);e.channelSelection=s}var l=a(t,"ContrastEnhancement")||[];if(l.length>0){var p=this.getContrastEnhancementFromSldContrastEnhancement(l[0]);e.contrastEnhancement=p}return e},t.prototype.getTextSymbolizerFromSldSymbolizer=function(t){var e={kind:"Text"},r=a(t,"Font[0].CssParameter")||[];0===r.length&&(r=a(t,"Font[0].SvgParameter")||[]);var n=a(t,"Label[0]");n&&(e.label=this.getTextSymbolizerLabelFromSldSymbolizer(n));var o=a(t,"Fill[0].CssParameter[0]._");o||(o=a(t,"Fill[0].SvgParameter[0]._"));var i=a(t,"Halo[0].Fill[0].CssParameter")||[];0===i.length&&(i=a(t,"Halo[0].Fill[0].SvgParameter")||[]);var s=a(t,"Halo[0].Radius[0]");o&&(e.color=o),s&&(e.haloWidth=parseFloat(s)),i.forEach((function(t){var r=t.$.name,n=t._;"fill"===r&&(e.haloColor=n)}));var l=a(t,"LabelPlacement[0].PointPlacement[0].Displacement[0]");if(l){var p=l.DisplacementX[0],c=l.DisplacementY[0];e.offset=[p?parseFloat(p):0,c?parseFloat(c):0]}var h=a(t,"LabelPlacement[0].PointPlacement[0].Rotation[0]");return h&&(e.rotate=parseFloat(h)),r.forEach((function(t){var r=t.$.name,n=t._;switch(r){case"font-family":e.font=[n];break;case"font-style":e.fontStyle=n;break;case"font-weight":e.fontWeight=n;break;case"font-size":e.size=parseFloat(n)}})),e},t.prototype.getSymbolizersFromRule=function(t){var e=this,r=[];return Object.keys(t).filter((function(t){return t.endsWith("Symbolizer")})).forEach((function(n){t[n].forEach((function(t){var o;switch(n){case"PointSymbolizer":o=e.getPointSymbolizerFromSldSymbolizer(t);break;case"LineSymbolizer":o=e.getLineSymbolizerFromSldSymbolizer(t);break;case"TextSymbolizer":o=e.getTextSymbolizerFromSldSymbolizer(t);break;case"PolygonSymbolizer":o=e.getFillSymbolizerFromSldSymbolizer(t);break;case"RasterSymbolizer":o=e.getRasterSymbolizerFromSldSymbolizer(t);break;default:throw new Error("Failed to parse SymbolizerKind from SldRule")}r.push(o)}))})),r},t.prototype.getRulesFromSldObject=function(t){var e=this,r=t.StyledLayerDescriptor.NamedLayer,n=[];return r.forEach((function(t){t.UserStyle.forEach((function(t){t.FeatureTypeStyle.forEach((function(t){t.Rule.forEach((function(t){var r=e.getFilterFromRule(t),o=e.getScaleDenominatorFromRule(t),i=e.getSymbolizersFromRule(t),s={name:t.Title?t.Title[0]:t.Name?t.Name[0]:""};r&&(s.filter=r),o&&(s.scaleDenominator=o),i&&(s.symbolizers=i),n.push(s)}))}))}))})),n},t.prototype.sldObjectToGeoStylerStyle=function(t){var e=this.getRulesFromSldObject(t);return{name:this.getStyleNameFromSldObject(t),rules:e}},t.prototype.readStyle=function(t){var e=this;return new Promise((function(r,n){var i={tagNameProcessors:[e.tagNameProcessor]};try{(0,o.parseString)(t,i,(function(t,o){t&&n("Error while parsing sldString: ".concat(t));var i=e.sldObjectToGeoStylerStyle(o);r(i)}))}catch(t){n(t)}}))},t.prototype.writeStyle=function(t){var e=this;return new Promise((function(r,n){try{var i={renderOpts:{pretty:e.prettyOutput}},s=new o.Builder(i),a=e.geoStylerStyleToSldObject(t);r(s.buildObject(a))}catch(t){n(t)}}))},t.prototype.geoStylerStyleToSldObject=function(t){var e=this.getSldRulesFromRules(t.rules);return e.forEach((function(t){t.Filter&&!t.Filter.$&&(t.Filter.$={xmlns:"http://www.opengis.net/ogc"})})),{StyledLayerDescriptor:{$:{version:"1.0.0","xsi:schemaLocation":"http://www.opengis.net/sld StyledLayerDescriptor.xsd",xmlns:"http://www.opengis.net/sld","xmlns:ogc":"http://www.opengis.net/ogc","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance"},NamedLayer:[{Name:[t.name||""],UserStyle:[{Name:[t.name||""],Title:[t.name||""],FeatureTypeStyle:[{Rule:e}]}]}]}}},t.prototype.getSldRulesFromRules=function(t){var e=this;return t.map((function(t){var r={Name:[t.name]};if(t.filter){var n=e.getSldFilterFromFilter(t.filter);r.Filter=n}if(t.scaleDenominator){var o=t.scaleDenominator,i=o.min,a=o.max;i&&s(i)&&(r.MinScaleDenominator=[i.toString()]),a&&s(a)&&(r.MaxScaleDenominator=[a.toString()])}var l=e.getSldSymbolizersFromSymbolizers(t.symbolizers),p=[];return l.length>0&&(p=Object.keys(l[0])),p.forEach((function(t){0===l[0][t].length&&delete l[0][t]})),l.length>0&&0!==Object.keys(l[0]).length&&(r=Object.assign(r,l[0])),r}))},t.prototype.getSldSymbolizersFromSymbolizers=function(t){var e=this,r=[],n={};return t.forEach((function(t){var o;switch(t.kind){case"Mark":n.PointSymbolizer||(n.PointSymbolizer=[]),o=e.getSldPointSymbolizerFromMarkSymbolizer(t),a(o,"PointSymbolizer[0]")&&n.PointSymbolizer.push(a(o,"PointSymbolizer[0]"));break;case"Icon":n.PointSymbolizer||(n.PointSymbolizer=[]),o=e.getSldPointSymbolizerFromIconSymbolizer(t),a(o,"PointSymbolizer[0]")&&n.PointSymbolizer.push(a(o,"PointSymbolizer[0]"));break;case"Text":n.TextSymbolizer||(n.TextSymbolizer=[]),o=e.getSldTextSymbolizerFromTextSymbolizer(t),a(o,"TextSymbolizer[0]")&&n.TextSymbolizer.push(a(o,"TextSymbolizer[0]"));break;case"Line":n.LineSymbolizer||(n.LineSymbolizer=[]),o=e.getSldLineSymbolizerFromLineSymbolizer(t),a(o,"LineSymbolizer[0]")&&n.LineSymbolizer.push(a(o,"LineSymbolizer[0]"));break;case"Fill":n.PolygonSymbolizer||(n.PolygonSymbolizer=[]),o=e.getSldPolygonSymbolizerFromFillSymbolizer(t),a(o,"PolygonSymbolizer[0]")&&n.PolygonSymbolizer.push(a(o,"PolygonSymbolizer[0]"));break;case"Raster":n.RasterSymbolizer||(n.RasterSymbolizer=[]),o=e.getSldRasterSymbolizerFromRasterSymbolizer(t),a(o,"RasterSymbolizer[0]")&&n.RasterSymbolizer.push(a(o,"RasterSymbolizer[0]"))}r.push(n)})),r},t.prototype.getSldTextSymbolizerFromTextSymbolizer=function(t){var e=[{Label:t.label?this.getSldLabelFromTextSymbolizer(t.label):void 0}],r={font:"font-family",size:"font-size",fontStyle:"font-style",fontWeight:"font-weight"},n=Object.keys(t).filter((function(t){return"kind"!==t&&r[t]})).map((function(e){return{_:"font"===e?t[e][0]:t[e],$:{name:r[e]}}}));if(n.length>0&&(e[0].Font=[{CssParameter:n}]),t.offset||void 0!==t.rotate){var o=[{}];t.offset&&(o[0].Displacement=[{DisplacementX:[t.offset[0].toString()],DisplacementY:[t.offset[1].toString()]}]),void 0!==t.rotate&&(o[0].Rotation=[t.rotate.toString()]),e[0].LabelPlacement=[{PointPlacement:o}]}if(t.color&&(e[0].Fill=[{CssParameter:[{_:t.color,$:{name:"fill"}}]}]),t.haloWidth||t.haloColor){var i={},s=[];t.haloWidth&&(i.Radius=[t.haloWidth.toString()]),t.haloColor&&s.push({_:t.haloColor,$:{name:"fill"}}),s.length>0&&(i.Fill=[{CssParameter:s}]),e[0].Halo=[i]}return{TextSymbolizer:e}},t.prototype.getSldPolygonSymbolizerFromFillSymbolizer=function(t){var e,r={outlineColor:"stroke",outlineWidth:"stroke-width",outlineOpacity:"stroke-opacity",outlineDasharray:"stroke-dasharray"},n={color:"fill",fillOpacity:"fill-opacity"},o=[],i=[];a(t,"graphicFill")&&("Mark"===a(t,"graphicFill.kind")?e=this.getSldPointSymbolizerFromMarkSymbolizer(t.graphicFill):"Icon"===a(t,"graphicFill.kind")&&(e=this.getSldPointSymbolizerFromIconSymbolizer(t.graphicFill))),Object.keys(t).filter((function(t){return"kind"!==t})).filter((function(e){return void 0!==t[e]&&null!==t[e]})).forEach((function(e){if(Object.keys(n).includes(e))i.push({_:t[e],$:{name:n[e]}});else if(Object.keys(r).includes(e)){var s="";if("outlineDasharray"===e){var a=t[e];s="",a.forEach((function(t,e){s+=t,e<a.length-1&&(s+=" ")}))}else s="outlineWidth"===e||"outlineOpacity"===e?t[e]+"":t[e];o.push({_:s,$:{name:r[e]}})}}));var s=[{}];return(i.length>0||e)&&(s[0].Fill=[{}],e&&(s[0].Fill[0].GraphicFill=[e.PointSymbolizer[0]]),i.length>0&&(s[0].Fill[0].CssParameter=i)),o.length>0&&(s[0].Stroke=[{CssParameter:o}]),{PolygonSymbolizer:s}},t.prototype.getSldLineSymbolizerFromLineSymbolizer=function(t){var e={color:"stroke",width:"stroke-width",opacity:"stroke-opacity",join:"stroke-linejoin",cap:"stroke-linecap",dasharray:"stroke-dasharray",dashOffset:"stroke-dashoffset"},r={LineSymbolizer:[{Stroke:[{}]}]},n=Object.keys(t).filter((function(r){return"kind"!==r&&e[r]&&void 0!==t[r]&&null!==t[r]})).map((function(r){var n=t[r];return"dasharray"===r&&(n=t.dasharray?t.dasharray.join(" "):void 0),"join"===r&&"miter"===n&&(n="mitre"),{_:n,$:{name:e[r]}}})),o=t.perpendicularOffset;if(a(t,"graphicStroke"))if("Mark"===a(t,"graphicStroke.kind")){var i=this.getSldPointSymbolizerFromMarkSymbolizer(t.graphicStroke);r.LineSymbolizer[0].Stroke[0].GraphicStroke=[i.PointSymbolizer[0]]}else"Icon"===a(t,"graphicStroke.kind")&&(i=this.getSldPointSymbolizerFromIconSymbolizer(t.graphicStroke),r.LineSymbolizer[0].Stroke[0].GraphicStroke=[i.PointSymbolizer[0]]);if(a(t,"graphicFill"))if("Mark"===a(t,"graphicFill.kind")){var s=this.getSldPointSymbolizerFromMarkSymbolizer(t.graphicFill);r.LineSymbolizer[0].Stroke[0].GraphicFill=[s.PointSymbolizer[0]]}else"Icon"===a(t,"graphicFill.kind")&&(s=this.getSldPointSymbolizerFromIconSymbolizer(t.graphicFill),r.LineSymbolizer[0].Stroke[0].GraphicFill=[s.PointSymbolizer[0]]);return 0!==n.length&&(r.LineSymbolizer[0].Stroke[0].CssParameter=n),o&&(r.LineSymbolizer[0].PerpendicularOffset=[o]),r},t.prototype.getSldPointSymbolizerFromMarkSymbolizer=function(t){var e=[{WellKnownName:[t.wellKnownName.toLowerCase()]}];if(t.color||t.fillOpacity){var r=[];t.color&&r.push({_:t.color,$:{name:"fill"}}),t.fillOpacity&&r.push({_:t.fillOpacity,$:{name:"fill-opacity"}}),e[0].Fill=[{CssParameter:r}]}if(t.strokeColor||t.strokeWidth||t.strokeOpacity){e[0].Stroke=[{}];var n=[];t.strokeColor&&n.push({_:t.strokeColor,$:{name:"stroke"}}),t.strokeWidth&&n.push({_:t.strokeWidth.toString(),$:{name:"stroke-width"}}),t.strokeOpacity&&n.push({_:t.strokeOpacity.toString(),$:{name:"stroke-opacity"}}),e[0].Stroke[0].CssParameter=n}var o=[{Mark:e}];return t.opacity&&(o[0].Opacity=[t.opacity.toString()]),t.radius&&(o[0].Size=[(2*t.radius).toString()]),t.rotate&&(o[0].Rotation=[t.rotate.toString()]),{PointSymbolizer:[{Graphic:o}]}},t.prototype.getSldPointSymbolizerFromIconSymbolizer=function(t){var e=[{ExternalGraphic:[{OnlineResource:[{$:{"xlink:type":"simple","xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":t.image}}]}]}];if(t.image){var r=t.image.split(".").pop();switch(r){case"png":case"jpeg":case"gif":e[0].ExternalGraphic[0].Format=["image/".concat(r)];break;case"jpg":e[0].ExternalGraphic[0].Format=["image/jpeg"];break;case"svg":e[0].ExternalGraphic[0].Format=["image/svg+xml"]}}return void 0!==t.opacity&&(e[0].Opacity=t.opacity),t.size&&(e[0].Size=t.size),t.rotate&&(e[0].Rotation=t.rotate),{PointSymbolizer:[{Graphic:e}]}},t.prototype.getSldRasterSymbolizerFromRasterSymbolizer=function(t){var e,r,n,o,i=[{}];return void 0!==t.opacity&&(e=[t.opacity.toString()],i[0].Opacity=e),t.colorMap&&(r=this.getSldColorMapFromColorMap(t.colorMap),p(r[0])||(i[0].ColorMap=r)),t.channelSelection&&(n=this.getSldChannelSelectionFromChannelSelection(t.channelSelection),p(n[0])||(i[0].ChannelSelection=n)),t.contrastEnhancement&&(o=this.getSldContrastEnhancementFromContrastEnhancement(t.contrastEnhancement),p(o[0])||(i[0].ContrastEnhancement=o)),{RasterSymbolizer:i}},t.prototype.getSldColorMapFromColorMap=function(t){var e=[{$:{}}];if(t.type){var r=t.type;e[0].$.type=r}if(void 0!==t.extended){var n=t.extended.toString();e[0].$.extended=n}if(t.colorMapEntries&&t.colorMapEntries.length>0){var o=t.colorMapEntries.map((function(t){var e={$:{}};return t.color&&(e.$.color=t.color),void 0!==t.quantity&&(e.$.quantity=t.quantity.toString()),t.label&&(e.$.label=t.label),void 0!==t.opacity&&(e.$.opacity=t.opacity.toString()),e})).filter((function(t){return Object.keys(t.$).length>0}));e[0].ColorMapEntry=o}return e},t.prototype.getSldChannelSelectionFromChannelSelection=function(t){var e=this,r={redChannel:"RedChannel",blueChannel:"BlueChannel",greenChannel:"GreenChannel",grayChannel:"GrayChannel"},n=Object.keys(t),o=[{}];return n.forEach((function(n){var i=[{}],s=a(t,"".concat(n,".sourceChannelName")),l=a(t,"".concat(n,".contrastEnhancement"));(s||l)&&(s&&(i[0].SourceChannelName=[s]),l&&(i[0].ContrastEnhancement=e.getSldContrastEnhancementFromContrastEnhancement(l)),o[0][r[n]]=i)})),o},t.prototype.getSldContrastEnhancementFromContrastEnhancement=function(t){var e=[{}],r=a(t,"enhancementType");return"normalize"===r?e[0].Normalize=[""]:"histogram"===r&&(e[0].Histogram=[""]),void 0!==t.gammaValue&&(e[0].GammaValue=[t.gammaValue.toString()]),e},t.prototype.getSldStrMatchesFunctionFromFunctionFilter=function(t){return{$:{name:"strMatches"},PropertyName:[t[1]],Literal:[t[2].toString().replace(/\//g,"")]}},t.prototype.getSldFunctionFilterFromFunctionFilter=function(t){if("strMatches"===t[0].split("FN_")[1])return this.getSldStrMatchesFunctionFromFunctionFilter(t)},t.prototype.getSldComparisonFilterFromComparisonFilter=function(e){var r,n,o,i={},s=e[0],a=e[1],l=e[2],p=t.keysByValue(t.comparisonMap,s),c=p.length>1&&null===l?p[1]:p[0],h="PropertyName";return Array.isArray(a)&&a[0].startsWith("FN_")&&(a=this.getSldFunctionFilterFromFunctionFilter(a),h="Function"),i[c]="PropertyIsNull"===c?[(r={},r[h]=[a],r)]:"PropertyIsLike"===c?[(n={$:{wildCard:"*",singleChar:".",escape:"!"}},n[h]=[a],n.Literal=[l],n)]:[(o={},o[h]=[a],o.Literal=[l],o)],i},t.prototype.getSldFilterFromFilter=function(e){var r=this,n={},o=e[0],i=e.slice(1);if(Object.values(t.comparisonMap).includes(o))n=this.getSldComparisonFilterFromComparisonFilter(e);else if(Object.values(t.combinationMap).includes(o)){var s=t.keysByValue(t.combinationMap,o)[0];n[s]=[{}],i.forEach((function(t,e){var o=r.getSldFilterFromFilter(t),i=Object.keys(o)[0];if("||"===t[0]||"&&"===t[0]){["And","Or"].includes(i)?(n[s][0][i]||(n[s][0][i]=[]),n[s][0][i][e]={}):n[s][0][i]={};var a=Object.keys(o)[0];t.forEach((function(t,o){if(o>0){var i=r.getSldFilterFromFilter(t),l=Object.keys(i)[0];n[s][0][a][e]||(n[s][0][a][e]={}),n[s][0][a][e][l]||(n[s][0][a][e][l]=[]),n[s][0][a][e][l].push(i[l][0])}}))}else Array.isArray(n[s][0][i])?n[s][0][i].push(o[i][0]):n[s][0][i]=o[i]}))}else Object.values(t.negationOperatorMap).includes(o)&&(n.Not=i.map((function(t){return r.getSldFilterFromFilter(t)})));return n},t.title="SLD Style Parser",t.negationOperatorMap={Not:"!"},t.combinationMap={And:"&&",Or:"||",PropertyIsBetween:"&&"},t.comparisonMap={PropertyIsEqualTo:"==",PropertyIsNotEqualTo:"!=",PropertyIsLike:"*=",PropertyIsLessThan:"<",PropertyIsLessThanOrEqualTo:"<=",PropertyIsGreaterThan:">",PropertyIsGreaterThanOrEqualTo:">=",PropertyIsNull:"=="},t}();e.SldStyleParser=c,e.default=c},80675:function(t,e){(function(){"use strict";e.stripBOM=function(t){return"\ufeff"===t[0]?t.substring(1):t}}).call(this)},56023:function(t,e,r){(function(){"use strict";var t,n,o,i,s,a={}.hasOwnProperty;t=r(86195),n=r(18560).defaults,i=function(t){return"string"==typeof t&&(t.indexOf("&")>=0||t.indexOf(">")>=0||t.indexOf("<")>=0)},s=function(t){return"<![CDATA["+o(t)+"]]>"},o=function(t){return t.replace("]]>","]]]]><![CDATA[>")},e.Builder=function(){function e(t){var e,r,o;for(e in this.options={},r=n[.2])a.call(r,e)&&(o=r[e],this.options[e]=o);for(e in t)a.call(t,e)&&(o=t[e],this.options[e]=o)}return e.prototype.buildObject=function(e){var r,o,l,p,c,h;return r=this.options.attrkey,o=this.options.charkey,1===Object.keys(e).length&&this.options.rootName===n[.2].rootName?e=e[c=Object.keys(e)[0]]:c=this.options.rootName,h=this,l=function(t,e){var n,p,c,u,f,d;if("object"!=typeof e)h.options.cdata&&i(e)?t.raw(s(e)):t.txt(e);else if(Array.isArray(e)){for(u in e)if(a.call(e,u))for(f in p=e[u])c=p[f],t=l(t.ele(f),c).up()}else for(f in e)if(a.call(e,f))if(p=e[f],f===r){if("object"==typeof p)for(n in p)d=p[n],t=t.att(n,d)}else if(f===o)t=h.options.cdata&&i(p)?t.raw(s(p)):t.txt(p);else if(Array.isArray(p))for(u in p)a.call(p,u)&&(t="string"==typeof(c=p[u])?h.options.cdata&&i(c)?t.ele(f).raw(s(c)).up():t.ele(f,c).up():l(t.ele(f),c).up());else"object"==typeof p?t=l(t.ele(f),p).up():"string"==typeof p&&h.options.cdata&&i(p)?t=t.ele(f).raw(s(p)).up():(null==p&&(p=""),t=t.ele(f,p.toString()).up());return t},p=t.create(c,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),l(p,e).end(this.options.renderOpts)},e}()}).call(this)},18560:function(t,e){(function(){e.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},30699:function(t,e,r){(function(){"use strict";var t,n,o,i,s,a,l,p,c=function(t,e){return function(){return t.apply(e,arguments)}},h={}.hasOwnProperty;l=r(1861),o=r(54575),t=r(80675),a=r(5477),p=r(18698).setImmediate,n=r(18560).defaults,i=function(t){return"object"==typeof t&&null!=t&&0===Object.keys(t).length},s=function(t,e,r){var n,o;for(n=0,o=t.length;n<o;n++)e=(0,t[n])(e,r);return e},e.Parser=function(r){function o(t){var r,o,i;if(this.parseStringPromise=c(this.parseStringPromise,this),this.parseString=c(this.parseString,this),this.reset=c(this.reset,this),this.assignOrPush=c(this.assignOrPush,this),this.processAsync=c(this.processAsync,this),!(this instanceof e.Parser))return new e.Parser(t);for(r in this.options={},o=n[.2])h.call(o,r)&&(i=o[r],this.options[r]=i);for(r in t)h.call(t,r)&&(i=t[r],this.options[r]=i);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(a.normalize)),this.reset()}return function(t,e){for(var r in e)h.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(o,r),o.prototype.processAsync=function(){var t,e;try{return this.remaining.length<=this.options.chunkSize?(t=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(t),this.saxParser.close()):(t=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(t),p(this.processAsync))}catch(t){if(e=t,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(e)}},o.prototype.assignOrPush=function(t,e,r){return e in t?(t[e]instanceof Array||(t[e]=[t[e]]),t[e].push(r)):this.options.explicitArray?t[e]=[r]:t[e]=r},o.prototype.reset=function(){var t,e,r,n,o;return this.removeAllListeners(),this.saxParser=l.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(o=this,function(t){if(o.saxParser.resume(),!o.saxParser.errThrown)return o.saxParser.errThrown=!0,o.emit("error",t)}),this.saxParser.onend=function(t){return function(){if(!t.saxParser.ended)return t.saxParser.ended=!0,t.emit("end",t.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,n=[],t=this.options.attrkey,e=this.options.charkey,this.saxParser.onopentag=function(r){return function(o){var i,a,l,p,c;if((l={})[e]="",!r.options.ignoreAttrs)for(i in c=o.attributes)h.call(c,i)&&(t in l||r.options.mergeAttrs||(l[t]={}),a=r.options.attrValueProcessors?s(r.options.attrValueProcessors,o.attributes[i],i):o.attributes[i],p=r.options.attrNameProcessors?s(r.options.attrNameProcessors,i):i,r.options.mergeAttrs?r.assignOrPush(l,p,a):l[t][p]=a);return l["#name"]=r.options.tagNameProcessors?s(r.options.tagNameProcessors,o.name):o.name,r.options.xmlns&&(l[r.options.xmlnskey]={uri:o.uri,local:o.local}),n.push(l)}}(this),this.saxParser.onclosetag=function(t){return function(){var r,o,a,l,p,c,u,f,d,y;if(c=n.pop(),p=c["#name"],t.options.explicitChildren&&t.options.preserveChildrenOrder||delete c["#name"],!0===c.cdata&&(r=c.cdata,delete c.cdata),d=n[n.length-1],c[e].match(/^\s*$/)&&!r?(o=c[e],delete c[e]):(t.options.trim&&(c[e]=c[e].trim()),t.options.normalize&&(c[e]=c[e].replace(/\s{2,}/g," ").trim()),c[e]=t.options.valueProcessors?s(t.options.valueProcessors,c[e],p):c[e],1===Object.keys(c).length&&e in c&&!t.EXPLICIT_CHARKEY&&(c=c[e])),i(c)&&(c=""!==t.options.emptyTag?t.options.emptyTag:o),null!=t.options.validator&&(y="/"+function(){var t,e,r;for(r=[],t=0,e=n.length;t<e;t++)l=n[t],r.push(l["#name"]);return r}().concat(p).join("/"),function(){var e;try{c=t.options.validator(y,d&&d[p],c)}catch(r){return e=r,t.emit("error",e)}}()),t.options.explicitChildren&&!t.options.mergeAttrs&&"object"==typeof c)if(t.options.preserveChildrenOrder){if(d){for(a in d[t.options.childkey]=d[t.options.childkey]||[],u={},c)h.call(c,a)&&(u[a]=c[a]);d[t.options.childkey].push(u),delete c["#name"],1===Object.keys(c).length&&e in c&&!t.EXPLICIT_CHARKEY&&(c=c[e])}}else l={},t.options.attrkey in c&&(l[t.options.attrkey]=c[t.options.attrkey],delete c[t.options.attrkey]),!t.options.charsAsChildren&&t.options.charkey in c&&(l[t.options.charkey]=c[t.options.charkey],delete c[t.options.charkey]),Object.getOwnPropertyNames(c).length>0&&(l[t.options.childkey]=c),c=l;return n.length>0?t.assignOrPush(d,p,c):(t.options.explicitRoot&&(f=c,(c={})[p]=f),t.resultObject=c,t.saxParser.ended=!0,t.emit("end",t.resultObject))}}(this),r=function(t){return function(r){var o,i;if(i=n[n.length-1])return i[e]+=r,t.options.explicitChildren&&t.options.preserveChildrenOrder&&t.options.charsAsChildren&&(t.options.includeWhiteChars||""!==r.replace(/\\n/g,"").trim())&&(i[t.options.childkey]=i[t.options.childkey]||[],(o={"#name":"__text__"})[e]=r,t.options.normalize&&(o[e]=o[e].replace(/\s{2,}/g," ").trim()),i[t.options.childkey].push(o)),i}}(this),this.saxParser.ontext=r,this.saxParser.oncdata=function(t){var e;if(e=r(t))return e.cdata=!0}},o.prototype.parseString=function(e,r){var n;null!=r&&"function"==typeof r&&(this.on("end",(function(t){return this.reset(),r(null,t)})),this.on("error",(function(t){return this.reset(),r(t)})));try{return""===(e=e.toString()).trim()?(this.emit("end",null),!0):(e=t.stripBOM(e),this.options.async?(this.remaining=e,p(this.processAsync),this.saxParser):this.saxParser.write(e).close())}catch(t){if(n=t,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",n),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw n}},o.prototype.parseStringPromise=function(t){return new Promise((e=this,function(r,n){return e.parseString(t,(function(t,e){return t?n(t):r(e)}))}));var e},o}(o),e.parseString=function(t,r,n){var o,i;return null!=n?("function"==typeof n&&(o=n),"object"==typeof r&&(i=r)):("function"==typeof r&&(o=r),i={}),new e.Parser(i).parseString(t,o)},e.parseStringPromise=function(t,r){var n;return"object"==typeof r&&(n=r),new e.Parser(n).parseStringPromise(t)}}).call(this)},5477:function(t,e){(function(){"use strict";var t;t=new RegExp(/(?!xmlns)^.*:/),e.normalize=function(t){return t.toLowerCase()},e.firstCharLowerCase=function(t){return t.charAt(0).toLowerCase()+t.slice(1)},e.stripPrefix=function(e){return e.replace(t,"")},e.parseNumbers=function(t){return isNaN(t)||(t=t%1==0?parseInt(t,10):parseFloat(t)),t},e.parseBooleans=function(t){return/^(?:true|false)$/i.test(t)&&(t="true"===t.toLowerCase()),t}}).call(this)},91603:function(t,e,r){(function(){"use strict";var t,n,o,i,s={}.hasOwnProperty;n=r(18560),t=r(56023),o=r(30699),i=r(5477),e.defaults=n.defaults,e.processors=i,e.ValidationError=function(t){function e(t){this.message=t}return function(t,e){for(var r in e)s.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,Error),e}(),e.Builder=t.Builder,e.Parser=o.Parser,e.parseString=o.parseString,e.parseStringPromise=o.parseStringPromise}).call(this)},12935:function(t){(function(){t.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},22360:function(t){(function(){t.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},28022:function(t){(function(){var e,r,n,o,i,s,a,l=[].slice,p={}.hasOwnProperty;e=function(){var t,e,r,n,o,s;if(s=arguments[0],o=2<=arguments.length?l.call(arguments,1):[],i(Object.assign))Object.assign.apply(null,arguments);else for(t=0,r=o.length;t<r;t++)if(null!=(n=o[t]))for(e in n)p.call(n,e)&&(s[e]=n[e]);return s},i=function(t){return!!t&&"[object Function]"===Object.prototype.toString.call(t)},s=function(t){var e;return!!t&&("function"==(e=typeof t)||"object"===e)},n=function(t){return i(Array.isArray)?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},o=function(t){var e;if(n(t))return!t.length;for(e in t)if(p.call(t,e))return!1;return!0},a=function(t){var e,r;return s(t)&&(r=Object.getPrototypeOf(t))&&(e=r.constructor)&&"function"==typeof e&&e instanceof e&&Function.prototype.toString.call(e)===Function.prototype.toString.call(Object)},r=function(t){return i(t.valueOf)?t.valueOf():t},t.exports.assign=e,t.exports.isFunction=i,t.exports.isObject=s,t.exports.isArray=n,t.exports.isEmpty=o,t.exports.isPlainObject=a,t.exports.getValue=r}).call(this)},69932:function(t){(function(){t.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},19459:function(t,e,r){(function(){var e;e=r(22360),r(99631),t.exports=function(){function t(t,r,n){if(this.parent=t,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==r)throw new Error("Missing attribute name. "+this.debugInfo(r));this.name=this.stringify.name(r),this.value=this.stringify.attValue(n),this.type=e.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(t.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.value},set:function(t){return this.value=t||""}}),Object.defineProperty(t.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(t.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(t.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(t.prototype,"specified",{get:function(){return!0}}),t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(t){return this.options.writer.attribute(this,this.options.writer.filterOptions(t))},t.prototype.debugInfo=function(t){return null==(t=t||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+t+"}, parent: <"+this.parent.name+">"},t.prototype.isEqualNode=function(t){return t.namespaceURI===this.namespaceURI&&t.prefix===this.prefix&&t.localName===this.localName&&t.value===this.value},t}()}).call(this)},79436:function(t,e,r){(function(){var e,n,o={}.hasOwnProperty;e=r(22360),n=r(33555),t.exports=function(t){function r(t,n){if(r.__super__.constructor.call(this,t),null==n)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=e.CData,this.value=this.stringify.cdata(n)}return function(t,e){for(var r in e)o.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(r,t),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(t){return this.options.writer.cdata(this,this.options.writer.filterOptions(t))},r}(n)}).call(this)},33555:function(t,e,r){(function(){var e,n={}.hasOwnProperty;e=r(99631),t.exports=function(t){function e(t){e.__super__.constructor.call(this,t),this.value=""}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this.value},set:function(t){return this.value=t||""}}),Object.defineProperty(e.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(t){return this.value=t||""}}),e.prototype.clone=function(){return Object.create(this)},e.prototype.substringData=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.appendData=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.insertData=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.deleteData=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.replaceData=function(t,e,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isEqualNode=function(t){return!!e.__super__.isEqualNode.apply(this,arguments).isEqualNode(t)&&t.data===this.data},e}(e)}).call(this)},86963:function(t,e,r){(function(){var e,n,o={}.hasOwnProperty;e=r(22360),n=r(33555),t.exports=function(t){function r(t,n){if(r.__super__.constructor.call(this,t),null==n)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=e.Comment,this.value=this.stringify.comment(n)}return function(t,e){for(var r in e)o.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(r,t),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(t){return this.options.writer.comment(this,this.options.writer.filterOptions(t))},r}(n)}).call(this)},89953:function(t,e,r){(function(){var e,n;e=r(53111),n=r(65281),t.exports=function(){function t(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(t.prototype,"parameterNames",{get:function(){return new n(Object.keys(this.defaultParams))}}),t.prototype.getParameter=function(t){return this.params.hasOwnProperty(t)?this.params[t]:null},t.prototype.canSetParameter=function(t,e){return!0},t.prototype.setParameter=function(t,e){return null!=e?this.params[t]=e:delete this.params[t]},t}()}).call(this)},53111:function(t){(function(){t.exports=function(){function t(){}return t.prototype.handleError=function(t){throw new Error(t)},t}()}).call(this)},94588:function(t){(function(){t.exports=function(){function t(){}return t.prototype.hasFeature=function(t,e){return!0},t.prototype.createDocumentType=function(t,e,r){throw new Error("This DOM method is not implemented.")},t.prototype.createDocument=function(t,e,r){throw new Error("This DOM method is not implemented.")},t.prototype.createHTMLDocument=function(t){throw new Error("This DOM method is not implemented.")},t.prototype.getFeature=function(t,e){throw new Error("This DOM method is not implemented.")},t}()}).call(this)},65281:function(t){(function(){t.exports=function(){function t(t){this.arr=t||[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.arr.length}}),t.prototype.item=function(t){return this.arr[t]||null},t.prototype.contains=function(t){return-1!==this.arr.indexOf(t)},t}()}).call(this)},78573:function(t,e,r){(function(){var e,n,o={}.hasOwnProperty;n=r(99631),e=r(22360),t.exports=function(t){function r(t,n,o,i,s,a){if(r.__super__.constructor.call(this,t),null==n)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==o)throw new Error("Missing DTD attribute name. "+this.debugInfo(n));if(!i)throw new Error("Missing DTD attribute type. "+this.debugInfo(n));if(!s)throw new Error("Missing DTD attribute default. "+this.debugInfo(n));if(0!==s.indexOf("#")&&(s="#"+s),!s.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(n));if(a&&!s.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(n));this.elementName=this.stringify.name(n),this.type=e.AttributeDeclaration,this.attributeName=this.stringify.name(o),this.attributeType=this.stringify.dtdAttType(i),a&&(this.defaultValue=this.stringify.dtdAttDefault(a)),this.defaultValueType=s}return function(t,e){for(var r in e)o.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(r,t),r.prototype.toString=function(t){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(t))},r}(n)}).call(this)},4114:function(t,e,r){(function(){var e,n,o={}.hasOwnProperty;n=r(99631),e=r(22360),t.exports=function(t){function r(t,n,o){if(r.__super__.constructor.call(this,t),null==n)throw new Error("Missing DTD element name. "+this.debugInfo());o||(o="(#PCDATA)"),Array.isArray(o)&&(o="("+o.join(",")+")"),this.name=this.stringify.name(n),this.type=e.ElementDeclaration,this.value=this.stringify.dtdElementValue(o)}return function(t,e){for(var r in e)o.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(r,t),r.prototype.toString=function(t){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(t))},r}(n)}).call(this)},34523:function(t,e,r){(function(){var e,n,o,i={}.hasOwnProperty;o=r(28022).isObject,n=r(99631),e=r(22360),t.exports=function(t){function r(t,n,i,s){if(r.__super__.constructor.call(this,t),null==i)throw new Error("Missing DTD entity name. "+this.debugInfo(i));if(null==s)throw new Error("Missing DTD entity value. "+this.debugInfo(i));if(this.pe=!!n,this.name=this.stringify.name(i),this.type=e.EntityDeclaration,o(s)){if(!s.pubID&&!s.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(i));if(s.pubID&&!s.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(i));if(this.internal=!1,null!=s.pubID&&(this.pubID=this.stringify.dtdPubID(s.pubID)),null!=s.sysID&&(this.sysID=this.stringify.dtdSysID(s.sysID)),null!=s.nData&&(this.nData=this.stringify.dtdNData(s.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(i))}else this.value=this.stringify.dtdEntityValue(s),this.internal=!0}return function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(r,t),Object.defineProperty(r.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(r.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(r.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(r.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(r.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(r.prototype,"xmlVersion",{get:function(){return null}}),r.prototype.toString=function(t){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(t))},r}(n)}).call(this)},47238:function(t,e,r){(function(){var e,n,o={}.hasOwnProperty;n=r(99631),e=r(22360),t.exports=function(t){function r(t,n,o){if(r.__super__.constructor.call(this,t),null==n)throw new Error("Missing DTD notation name. "+this.debugInfo(n));if(!o.pubID&&!o.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(n));this.name=this.stringify.name(n),this.type=e.NotationDeclaration,null!=o.pubID&&(this.pubID=this.stringify.dtdPubID(o.pubID)),null!=o.sysID&&(this.sysID=this.stringify.dtdSysID(o.sysID))}return function(t,e){for(var r in e)o.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(r,t),Object.defineProperty(r.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(r.prototype,"systemId",{get:function(){return this.sysID}}),r.prototype.toString=function(t){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(t))},r}(n)}).call(this)},62859:function(t,e,r){(function(){var e,n,o,i={}.hasOwnProperty;o=r(28022).isObject,n=r(99631),e=r(22360),t.exports=function(t){function r(t,n,i,s){var a;r.__super__.constructor.call(this,t),o(n)&&(n=(a=n).version,i=a.encoding,s=a.standalone),n||(n="1.0"),this.type=e.Declaration,this.version=this.stringify.xmlVersion(n),null!=i&&(this.encoding=this.stringify.xmlEncoding(i)),null!=s&&(this.standalone=this.stringify.xmlStandalone(s))}return function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(r,t),r.prototype.toString=function(t){return this.options.writer.declaration(this,this.options.writer.filterOptions(t))},r}(n)}).call(this)},4749:function(t,e,r){(function(){var e,n,o,i,s,a,l,p,c={}.hasOwnProperty;p=r(28022).isObject,l=r(99631),e=r(22360),n=r(78573),i=r(34523),o=r(4114),s=r(47238),a=r(38992),t.exports=function(t){function r(t,n,o){var i,s,a,l,c,h;if(r.__super__.constructor.call(this,t),this.type=e.DocType,t.children)for(s=0,a=(l=t.children).length;s<a;s++)if((i=l[s]).type===e.Element){this.name=i.name;break}this.documentObject=t,p(n)&&(n=(c=n).pubID,o=c.sysID),null==o&&(o=(h=[n,o])[0],n=h[1]),null!=n&&(this.pubID=this.stringify.dtdPubID(n)),null!=o&&(this.sysID=this.stringify.dtdSysID(o))}return function(t,e){for(var r in e)c.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(r,t),Object.defineProperty(r.prototype,"entities",{get:function(){var t,r,n,o,i;for(o={},r=0,n=(i=this.children).length;r<n;r++)(t=i[r]).type!==e.EntityDeclaration||t.pe||(o[t.name]=t);return new a(o)}}),Object.defineProperty(r.prototype,"notations",{get:function(){var t,r,n,o,i;for(o={},r=0,n=(i=this.children).length;r<n;r++)(t=i[r]).type===e.NotationDeclaration&&(o[t.name]=t);return new a(o)}}),Object.defineProperty(r.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(r.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(r.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),r.prototype.element=function(t,e){var r;return r=new o(this,t,e),this.children.push(r),this},r.prototype.attList=function(t,e,r,o,i){var s;return s=new n(this,t,e,r,o,i),this.children.push(s),this},r.prototype.entity=function(t,e){var r;return r=new i(this,!1,t,e),this.children.push(r),this},r.prototype.pEntity=function(t,e){var r;return r=new i(this,!0,t,e),this.children.push(r),this},r.prototype.notation=function(t,e){var r;return r=new s(this,t,e),this.children.push(r),this},r.prototype.toString=function(t){return this.options.writer.docType(this,this.options.writer.filterOptions(t))},r.prototype.ele=function(t,e){return this.element(t,e)},r.prototype.att=function(t,e,r,n,o){return this.attList(t,e,r,n,o)},r.prototype.ent=function(t,e){return this.entity(t,e)},r.prototype.pent=function(t,e){return this.pEntity(t,e)},r.prototype.not=function(t,e){return this.notation(t,e)},r.prototype.up=function(){return this.root()||this.documentObject},r.prototype.isEqualNode=function(t){return!!r.__super__.isEqualNode.apply(this,arguments).isEqualNode(t)&&t.name===this.name&&t.publicId===this.publicId&&t.systemId===this.systemId},r}(l)}).call(this)},82229:function(t,e,r){(function(){var e,n,o,i,s,a,l,p={}.hasOwnProperty;l=r(28022).isPlainObject,o=r(94588),n=r(89953),i=r(99631),e=r(22360),a=r(77839),s=r(67090),t.exports=function(t){function r(t){r.__super__.constructor.call(this,null),this.name="#document",this.type=e.Document,this.documentURI=null,this.domConfig=new n,t||(t={}),t.writer||(t.writer=new s),this.options=t,this.stringify=new a(t)}return function(t,e){for(var r in e)p.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(r,t),Object.defineProperty(r.prototype,"implementation",{value:new o}),Object.defineProperty(r.prototype,"doctype",{get:function(){var t,r,n,o;for(r=0,n=(o=this.children).length;r<n;r++)if((t=o[r]).type===e.DocType)return t;return null}}),Object.defineProperty(r.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(r.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(r.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(r.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===e.Declaration?this.children[0].encoding:null}}),Object.defineProperty(r.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===e.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(r.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===e.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(r.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(r.prototype,"origin",{get:function(){return null}}),Object.defineProperty(r.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(r.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(r.prototype,"contentType",{get:function(){return null}}),r.prototype.end=function(t){var e;return e={},t?l(t)&&(e=t,t=this.options.writer):t=this.options.writer,t.document(this,t.filterOptions(e))},r.prototype.toString=function(t){return this.options.writer.document(this,this.options.writer.filterOptions(t))},r.prototype.createElement=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createTextNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createComment=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createCDATASection=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createProcessingInstruction=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createAttribute=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createEntityReference=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByTagName=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.importNode=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createElementNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createAttributeNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByTagNameNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementById=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.adoptNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.renameNode=function(t,e,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByClassName=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createEvent=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createNodeIterator=function(t,e,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createTreeWalker=function(t,e,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},r}(i)}).call(this)},65157:function(t,e,r){(function(){var e,n,o,i,s,a,l,p,c,h,u,f,d,y,m,g,b,w,v,S,O,F,D,P={}.hasOwnProperty;D=r(28022),O=D.isObject,S=D.isFunction,F=D.isPlainObject,v=D.getValue,e=r(22360),f=r(82229),d=r(78345),i=r(79436),s=r(86963),m=r(26322),w=r(4572),y=r(18170),h=r(62859),u=r(4749),a=r(78573),p=r(34523),l=r(4114),c=r(47238),o=r(19459),b=r(77839),g=r(67090),n=r(69932),t.exports=function(){function t(t,r,n){var o;this.name="?xml",this.type=e.Document,t||(t={}),o={},t.writer?F(t.writer)&&(o=t.writer,t.writer=new g):t.writer=new g,this.options=t,this.writer=t.writer,this.writerOptions=this.writer.filterOptions(o),this.stringify=new b(t),this.onDataCallback=r||function(){},this.onEndCallback=n||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return t.prototype.createChildNode=function(t){var r,n,o,i,s,a,l,p;switch(t.type){case e.CData:this.cdata(t.value);break;case e.Comment:this.comment(t.value);break;case e.Element:for(n in o={},l=t.attribs)P.call(l,n)&&(r=l[n],o[n]=r.value);this.node(t.name,o);break;case e.Dummy:this.dummy();break;case e.Raw:this.raw(t.value);break;case e.Text:this.text(t.value);break;case e.ProcessingInstruction:this.instruction(t.target,t.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+t.constructor.name)}for(s=0,a=(p=t.children).length;s<a;s++)i=p[s],this.createChildNode(i),i.type===e.Element&&this.up();return this},t.prototype.dummy=function(){return this},t.prototype.node=function(t,e,r){var n;if(null==t)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(t));return this.openCurrent(),t=v(t),null==e&&(e={}),e=v(e),O(e)||(r=(n=[e,r])[0],e=n[1]),this.currentNode=new d(this,t,e),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=r&&this.text(r),this},t.prototype.element=function(t,r,n){var o,i,s,a,l,p;if(this.currentNode&&this.currentNode.type===e.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(t)||O(t)||S(t))for(a=this.options.noValidation,this.options.noValidation=!0,(p=new f(this.options).element("TEMP_ROOT")).element(t),this.options.noValidation=a,i=0,s=(l=p.children).length;i<s;i++)o=l[i],this.createChildNode(o),o.type===e.Element&&this.up();else this.node(t,r,n);return this},t.prototype.attribute=function(t,e){var r,n;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(t));if(null!=t&&(t=v(t)),O(t))for(r in t)P.call(t,r)&&(n=t[r],this.attribute(r,n));else S(e)&&(e=e.apply()),this.options.keepNullAttributes&&null==e?this.currentNode.attribs[t]=new o(this,t,""):null!=e&&(this.currentNode.attribs[t]=new o(this,t,e));return this},t.prototype.text=function(t){var e;return this.openCurrent(),e=new w(this,t),this.onData(this.writer.text(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.cdata=function(t){var e;return this.openCurrent(),e=new i(this,t),this.onData(this.writer.cdata(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.comment=function(t){var e;return this.openCurrent(),e=new s(this,t),this.onData(this.writer.comment(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.raw=function(t){var e;return this.openCurrent(),e=new m(this,t),this.onData(this.writer.raw(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.instruction=function(t,e){var r,n,o,i,s;if(this.openCurrent(),null!=t&&(t=v(t)),null!=e&&(e=v(e)),Array.isArray(t))for(r=0,i=t.length;r<i;r++)n=t[r],this.instruction(n);else if(O(t))for(n in t)P.call(t,n)&&(o=t[n],this.instruction(n,o));else S(e)&&(e=e.apply()),s=new y(this,t,e),this.onData(this.writer.processingInstruction(s,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},t.prototype.declaration=function(t,e,r){var n;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return n=new h(this,t,e,r),this.onData(this.writer.declaration(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.doctype=function(t,e,r){if(this.openCurrent(),null==t)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new u(this,e,r),this.currentNode.rootNodeName=t,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},t.prototype.dtdElement=function(t,e){var r;return this.openCurrent(),r=new l(this,t,e),this.onData(this.writer.dtdElement(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.attList=function(t,e,r,n,o){var i;return this.openCurrent(),i=new a(this,t,e,r,n,o),this.onData(this.writer.dtdAttList(i,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.entity=function(t,e){var r;return this.openCurrent(),r=new p(this,!1,t,e),this.onData(this.writer.dtdEntity(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.pEntity=function(t,e){var r;return this.openCurrent(),r=new p(this,!0,t,e),this.onData(this.writer.dtdEntity(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.notation=function(t,e){var r;return this.openCurrent(),r=new c(this,t,e),this.onData(this.writer.dtdNotation(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},t.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},t.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},t.prototype.openNode=function(t){var r,o,i,s;if(!t.isOpen){if(this.root||0!==this.currentLevel||t.type!==e.Element||(this.root=t),o="",t.type===e.Element){for(i in this.writerOptions.state=n.OpenTag,o=this.writer.indent(t,this.writerOptions,this.currentLevel)+"<"+t.name,s=t.attribs)P.call(s,i)&&(r=s[i],o+=this.writer.attribute(r,this.writerOptions,this.currentLevel));o+=(t.children?">":"/>")+this.writer.endline(t,this.writerOptions,this.currentLevel),this.writerOptions.state=n.InsideTag}else this.writerOptions.state=n.OpenTag,o=this.writer.indent(t,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+t.rootNodeName,t.pubID&&t.sysID?o+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(o+=' SYSTEM "'+t.sysID+'"'),t.children?(o+=" [",this.writerOptions.state=n.InsideTag):(this.writerOptions.state=n.CloseTag,o+=">"),o+=this.writer.endline(t,this.writerOptions,this.currentLevel);return this.onData(o,this.currentLevel),t.isOpen=!0}},t.prototype.closeNode=function(t){var r;if(!t.isClosed)return"",this.writerOptions.state=n.CloseTag,r=t.type===e.Element?this.writer.indent(t,this.writerOptions,this.currentLevel)+"</"+t.name+">"+this.writer.endline(t,this.writerOptions,this.currentLevel):this.writer.indent(t,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(t,this.writerOptions,this.currentLevel),this.writerOptions.state=n.None,this.onData(r,this.currentLevel),t.isClosed=!0},t.prototype.onData=function(t,e){return this.documentStarted=!0,this.onDataCallback(t,e+1)},t.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},t.prototype.debugInfo=function(t){return null==t?"":"node: <"+t+">"},t.prototype.ele=function(){return this.element.apply(this,arguments)},t.prototype.nod=function(t,e,r){return this.node(t,e,r)},t.prototype.txt=function(t){return this.text(t)},t.prototype.dat=function(t){return this.cdata(t)},t.prototype.com=function(t){return this.comment(t)},t.prototype.ins=function(t,e){return this.instruction(t,e)},t.prototype.dec=function(t,e,r){return this.declaration(t,e,r)},t.prototype.dtd=function(t,e,r){return this.doctype(t,e,r)},t.prototype.e=function(t,e,r){return this.element(t,e,r)},t.prototype.n=function(t,e,r){return this.node(t,e,r)},t.prototype.t=function(t){return this.text(t)},t.prototype.d=function(t){return this.cdata(t)},t.prototype.c=function(t){return this.comment(t)},t.prototype.r=function(t){return this.raw(t)},t.prototype.i=function(t,e){return this.instruction(t,e)},t.prototype.att=function(){return this.currentNode&&this.currentNode.type===e.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},t.prototype.a=function(){return this.currentNode&&this.currentNode.type===e.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},t.prototype.ent=function(t,e){return this.entity(t,e)},t.prototype.pent=function(t,e){return this.pEntity(t,e)},t.prototype.not=function(t,e){return this.notation(t,e)},t}()}).call(this)},65529:function(t,e,r){(function(){var e,n,o={}.hasOwnProperty;n=r(99631),e=r(22360),t.exports=function(t){function r(t){r.__super__.constructor.call(this,t),this.type=e.Dummy}return function(t,e){for(var r in e)o.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(r,t),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(t){return""},r}(n)}).call(this)},78345:function(t,e,r){(function(){var e,n,o,i,s,a,l,p,c={}.hasOwnProperty;p=r(28022),l=p.isObject,a=p.isFunction,s=p.getValue,i=r(99631),e=r(22360),n=r(19459),o=r(38992),t.exports=function(t){function r(t,n,o){var i,s,a,l;if(r.__super__.constructor.call(this,t),null==n)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(n),this.type=e.Element,this.attribs={},this.schemaTypeInfo=null,null!=o&&this.attribute(o),t.type===e.Document&&(this.isRoot=!0,this.documentObject=t,t.rootObject=this,t.children))for(s=0,a=(l=t.children).length;s<a;s++)if((i=l[s]).type===e.DocType){i.name=this.name;break}}return function(t,e){for(var r in e)c.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(r,t),Object.defineProperty(r.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(r.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(r.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(r.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(r.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(r.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(r.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(r.prototype,"attributes",{get:function(){return this.attributeMap&&this.attributeMap.nodes||(this.attributeMap=new o(this.attribs)),this.attributeMap}}),r.prototype.clone=function(){var t,e,r,n;for(e in(r=Object.create(this)).isRoot&&(r.documentObject=null),r.attribs={},n=this.attribs)c.call(n,e)&&(t=n[e],r.attribs[e]=t.clone());return r.children=[],this.children.forEach((function(t){var e;return(e=t.clone()).parent=r,r.children.push(e)})),r},r.prototype.attribute=function(t,e){var r,o;if(null!=t&&(t=s(t)),l(t))for(r in t)c.call(t,r)&&(o=t[r],this.attribute(r,o));else a(e)&&(e=e.apply()),this.options.keepNullAttributes&&null==e?this.attribs[t]=new n(this,t,""):null!=e&&(this.attribs[t]=new n(this,t,e));return this},r.prototype.removeAttribute=function(t){var e,r,n;if(null==t)throw new Error("Missing attribute name. "+this.debugInfo());if(t=s(t),Array.isArray(t))for(r=0,n=t.length;r<n;r++)e=t[r],delete this.attribs[e];else delete this.attribs[t];return this},r.prototype.toString=function(t){return this.options.writer.element(this,this.options.writer.filterOptions(t))},r.prototype.att=function(t,e){return this.attribute(t,e)},r.prototype.a=function(t,e){return this.attribute(t,e)},r.prototype.getAttribute=function(t){return this.attribs.hasOwnProperty(t)?this.attribs[t].value:null},r.prototype.setAttribute=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getAttributeNode=function(t){return this.attribs.hasOwnProperty(t)?this.attribs[t]:null},r.prototype.setAttributeNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.removeAttributeNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByTagName=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getAttributeNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.setAttributeNS=function(t,e,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.removeAttributeNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getAttributeNodeNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.setAttributeNodeNS=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByTagNameNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.hasAttribute=function(t){return this.attribs.hasOwnProperty(t)},r.prototype.hasAttributeNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.setIdAttribute=function(t,e){return this.attribs.hasOwnProperty(t)?this.attribs[t].isId:e},r.prototype.setIdAttributeNS=function(t,e,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.setIdAttributeNode=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByTagName=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByTagNameNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByClassName=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.isEqualNode=function(t){var e,n,o;if(!r.__super__.isEqualNode.apply(this,arguments).isEqualNode(t))return!1;if(t.namespaceURI!==this.namespaceURI)return!1;if(t.prefix!==this.prefix)return!1;if(t.localName!==this.localName)return!1;if(t.attribs.length!==this.attribs.length)return!1;for(e=n=0,o=this.attribs.length-1;0<=o?n<=o:n>=o;e=0<=o?++n:--n)if(!this.attribs[e].isEqualNode(t.attribs[e]))return!1;return!0},r}(i)}).call(this)},38992:function(t){(function(){t.exports=function(){function t(t){this.nodes=t}return Object.defineProperty(t.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.getNamedItem=function(t){return this.nodes[t]},t.prototype.setNamedItem=function(t){var e;return e=this.nodes[t.nodeName],this.nodes[t.nodeName]=t,e||null},t.prototype.removeNamedItem=function(t){var e;return e=this.nodes[t],delete this.nodes[t],e||null},t.prototype.item=function(t){return this.nodes[Object.keys(this.nodes)[t]]||null},t.prototype.getNamedItemNS=function(t,e){throw new Error("This DOM method is not implemented.")},t.prototype.setNamedItemNS=function(t){throw new Error("This DOM method is not implemented.")},t.prototype.removeNamedItemNS=function(t,e){throw new Error("This DOM method is not implemented.")},t}()}).call(this)},99631:function(t,e,r){(function(){var e,n,o,i,s,a,l,p,c,h,u,f,d,y,m,g,b,w={}.hasOwnProperty;b=r(28022),g=b.isObject,m=b.isFunction,y=b.isEmpty,d=b.getValue,p=null,o=null,i=null,s=null,a=null,u=null,f=null,h=null,l=null,n=null,c=null,e=null,t.exports=function(){function t(t){this.parent=t,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,p||(p=r(78345),o=r(79436),i=r(86963),s=r(62859),a=r(4749),u=r(26322),f=r(4572),h=r(18170),l=r(65529),n=r(22360),c=r(29770),r(38992),e=r(12935))}return Object.defineProperty(t.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(t.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.childNodeList&&this.childNodeList.nodes||(this.childNodeList=new c(this.children)),this.childNodeList}}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){var t;return t=this.parent.children.indexOf(this),this.parent.children[t-1]||null}}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){var t;return t=this.parent.children.indexOf(this),this.parent.children[t+1]||null}}),Object.defineProperty(t.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(t.prototype,"textContent",{get:function(){var t,e,r,o,i;if(this.nodeType===n.Element||this.nodeType===n.DocumentFragment){for(i="",e=0,r=(o=this.children).length;e<r;e++)(t=o[e]).textContent&&(i+=t.textContent);return i}return null},set:function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),t.prototype.setParent=function(t){var e,r,n,o,i;for(this.parent=t,t&&(this.options=t.options,this.stringify=t.stringify),i=[],r=0,n=(o=this.children).length;r<n;r++)e=o[r],i.push(e.setParent(this));return i},t.prototype.element=function(t,e,r){var n,o,i,s,a,l,p,c,h,u,f;if(l=null,null===e&&null==r&&(e=(h=[{},null])[0],r=h[1]),null==e&&(e={}),e=d(e),g(e)||(r=(u=[e,r])[0],e=u[1]),null!=t&&(t=d(t)),Array.isArray(t))for(i=0,p=t.length;i<p;i++)o=t[i],l=this.element(o);else if(m(t))l=this.element(t.apply());else if(g(t)){for(a in t)if(w.call(t,a))if(f=t[a],m(f)&&(f=f.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===a.indexOf(this.stringify.convertAttKey))l=this.attribute(a.substr(this.stringify.convertAttKey.length),f);else if(!this.options.separateArrayItems&&Array.isArray(f)&&y(f))l=this.dummy();else if(g(f)&&y(f))l=this.element(a);else if(this.options.keepNullNodes||null!=f)if(!this.options.separateArrayItems&&Array.isArray(f))for(s=0,c=f.length;s<c;s++)o=f[s],(n={})[a]=o,l=this.element(n);else g(f)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===a.indexOf(this.stringify.convertTextKey)?l=this.element(f):(l=this.element(a)).element(f):l=this.element(a,f);else l=this.dummy()}else l=this.options.keepNullNodes||null!==r?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===t.indexOf(this.stringify.convertTextKey)?this.text(r):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===t.indexOf(this.stringify.convertCDataKey)?this.cdata(r):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===t.indexOf(this.stringify.convertCommentKey)?this.comment(r):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===t.indexOf(this.stringify.convertRawKey)?this.raw(r):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===t.indexOf(this.stringify.convertPIKey)?this.instruction(t.substr(this.stringify.convertPIKey.length),r):this.node(t,e,r):this.dummy();if(null==l)throw new Error("Could not create any elements with: "+t+". "+this.debugInfo());return l},t.prototype.insertBefore=function(t,e,r){var n,o,i,s,a;if(null!=t?t.type:void 0)return s=e,(i=t).setParent(this),s?(o=children.indexOf(s),a=children.splice(o),children.push(i),Array.prototype.push.apply(children,a)):children.push(i),i;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(t));return o=this.parent.children.indexOf(this),a=this.parent.children.splice(o),n=this.parent.element(t,e,r),Array.prototype.push.apply(this.parent.children,a),n},t.prototype.insertAfter=function(t,e,r){var n,o,i;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(t));return o=this.parent.children.indexOf(this),i=this.parent.children.splice(o+1),n=this.parent.element(t,e,r),Array.prototype.push.apply(this.parent.children,i),n},t.prototype.remove=function(){var t;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return t=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[t,t-t+1].concat([])),this.parent},t.prototype.node=function(t,e,r){var n,o;return null!=t&&(t=d(t)),e||(e={}),e=d(e),g(e)||(r=(o=[e,r])[0],e=o[1]),n=new p(this,t,e),null!=r&&n.text(r),this.children.push(n),n},t.prototype.text=function(t){var e;return g(t)&&this.element(t),e=new f(this,t),this.children.push(e),this},t.prototype.cdata=function(t){var e;return e=new o(this,t),this.children.push(e),this},t.prototype.comment=function(t){var e;return e=new i(this,t),this.children.push(e),this},t.prototype.commentBefore=function(t){var e,r;return e=this.parent.children.indexOf(this),r=this.parent.children.splice(e),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,r),this},t.prototype.commentAfter=function(t){var e,r;return e=this.parent.children.indexOf(this),r=this.parent.children.splice(e+1),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,r),this},t.prototype.raw=function(t){var e;return e=new u(this,t),this.children.push(e),this},t.prototype.dummy=function(){return new l(this)},t.prototype.instruction=function(t,e){var r,n,o,i,s;if(null!=t&&(t=d(t)),null!=e&&(e=d(e)),Array.isArray(t))for(i=0,s=t.length;i<s;i++)r=t[i],this.instruction(r);else if(g(t))for(r in t)w.call(t,r)&&(n=t[r],this.instruction(r,n));else m(e)&&(e=e.apply()),o=new h(this,t,e),this.children.push(o);return this},t.prototype.instructionBefore=function(t,e){var r,n;return r=this.parent.children.indexOf(this),n=this.parent.children.splice(r),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,n),this},t.prototype.instructionAfter=function(t,e){var r,n;return r=this.parent.children.indexOf(this),n=this.parent.children.splice(r+1),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,n),this},t.prototype.declaration=function(t,e,r){var o,i;return o=this.document(),i=new s(o,t,e,r),0===o.children.length?o.children.unshift(i):o.children[0].type===n.Declaration?o.children[0]=i:o.children.unshift(i),o.root()||o},t.prototype.dtd=function(t,e){var r,o,i,s,l,p,c,h,u;for(r=this.document(),o=new a(r,t,e),i=s=0,p=(h=r.children).length;s<p;i=++s)if(h[i].type===n.DocType)return r.children[i]=o,o;for(i=l=0,c=(u=r.children).length;l<c;i=++l)if(u[i].isRoot)return r.children.splice(i,0,o),o;return r.children.push(o),o},t.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},t.prototype.root=function(){var t;for(t=this;t;){if(t.type===n.Document)return t.rootObject;if(t.isRoot)return t;t=t.parent}},t.prototype.document=function(){var t;for(t=this;t;){if(t.type===n.Document)return t;t=t.parent}},t.prototype.end=function(t){return this.document().end(t)},t.prototype.prev=function(){var t;if((t=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[t-1]},t.prototype.next=function(){var t;if(-1===(t=this.parent.children.indexOf(this))||t===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[t+1]},t.prototype.importDocument=function(t){var e;return(e=t.root().clone()).parent=this,e.isRoot=!1,this.children.push(e),this},t.prototype.debugInfo=function(t){var e,r;return null!=(t=t||this.name)||(null!=(e=this.parent)?e.name:void 0)?null==t?"parent: <"+this.parent.name+">":(null!=(r=this.parent)?r.name:void 0)?"node: <"+t+">, parent: <"+this.parent.name+">":"node: <"+t+">":""},t.prototype.ele=function(t,e,r){return this.element(t,e,r)},t.prototype.nod=function(t,e,r){return this.node(t,e,r)},t.prototype.txt=function(t){return this.text(t)},t.prototype.dat=function(t){return this.cdata(t)},t.prototype.com=function(t){return this.comment(t)},t.prototype.ins=function(t,e){return this.instruction(t,e)},t.prototype.doc=function(){return this.document()},t.prototype.dec=function(t,e,r){return this.declaration(t,e,r)},t.prototype.e=function(t,e,r){return this.element(t,e,r)},t.prototype.n=function(t,e,r){return this.node(t,e,r)},t.prototype.t=function(t){return this.text(t)},t.prototype.d=function(t){return this.cdata(t)},t.prototype.c=function(t){return this.comment(t)},t.prototype.r=function(t){return this.raw(t)},t.prototype.i=function(t,e){return this.instruction(t,e)},t.prototype.u=function(){return this.up()},t.prototype.importXMLBuilder=function(t){return this.importDocument(t)},t.prototype.replaceChild=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.removeChild=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.appendChild=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.hasChildNodes=function(){return 0!==this.children.length},t.prototype.cloneNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.isSupported=function(t,e){return!0},t.prototype.hasAttributes=function(){return 0!==this.attribs.length},t.prototype.compareDocumentPosition=function(t){var r,n;return(r=this)===t?0:this.document()!==t.document()?(n=e.Disconnected|e.ImplementationSpecific,Math.random()<.5?n|=e.Preceding:n|=e.Following,n):r.isAncestor(t)?e.Contains|e.Preceding:r.isDescendant(t)?e.Contains|e.Following:r.isPreceding(t)?e.Preceding:e.Following},t.prototype.isSameNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.lookupPrefix=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.isDefaultNamespace=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.lookupNamespaceURI=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.isEqualNode=function(t){var e,r,n;if(t.nodeType!==this.nodeType)return!1;if(t.children.length!==this.children.length)return!1;for(e=r=0,n=this.children.length-1;0<=n?r<=n:r>=n;e=0<=n?++r:--r)if(!this.children[e].isEqualNode(t.children[e]))return!1;return!0},t.prototype.getFeature=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.setUserData=function(t,e,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.getUserData=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.contains=function(t){return!!t&&(t===this||this.isDescendant(t))},t.prototype.isDescendant=function(t){var e,r,n,o;for(r=0,n=(o=this.children).length;r<n;r++){if(t===(e=o[r]))return!0;if(e.isDescendant(t))return!0}return!1},t.prototype.isAncestor=function(t){return t.isDescendant(this)},t.prototype.isPreceding=function(t){var e,r;return e=this.treePosition(t),r=this.treePosition(this),-1!==e&&-1!==r&&e<r},t.prototype.isFollowing=function(t){var e,r;return e=this.treePosition(t),r=this.treePosition(this),-1!==e&&-1!==r&&e>r},t.prototype.treePosition=function(t){var e,r;return r=0,e=!1,this.foreachTreeNode(this.document(),(function(n){if(r++,!e&&n===t)return e=!0})),e?r:-1},t.prototype.foreachTreeNode=function(t,e){var r,n,o,i,s;for(t||(t=this.document()),n=0,o=(i=t.children).length;n<o;n++){if(s=e(r=i[n]))return s;if(s=this.foreachTreeNode(r,e))return s}},t}()}).call(this)},29770:function(t){(function(){t.exports=function(){function t(t){this.nodes=t}return Object.defineProperty(t.prototype,"length",{get:function(){return this.nodes.length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.item=function(t){return this.nodes[t]||null},t}()}).call(this)},18170:function(t,e,r){(function(){var e,n,o={}.hasOwnProperty;e=r(22360),n=r(33555),t.exports=function(t){function r(t,n,o){if(r.__super__.constructor.call(this,t),null==n)throw new Error("Missing instruction target. "+this.debugInfo());this.type=e.ProcessingInstruction,this.target=this.stringify.insTarget(n),this.name=this.target,o&&(this.value=this.stringify.insValue(o))}return function(t,e){for(var r in e)o.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(r,t),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(t){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(t))},r.prototype.isEqualNode=function(t){return!!r.__super__.isEqualNode.apply(this,arguments).isEqualNode(t)&&t.target===this.target},r}(n)}).call(this)},26322:function(t,e,r){(function(){var e,n,o={}.hasOwnProperty;e=r(22360),n=r(99631),t.exports=function(t){function r(t,n){if(r.__super__.constructor.call(this,t),null==n)throw new Error("Missing raw text. "+this.debugInfo());this.type=e.Raw,this.value=this.stringify.raw(n)}return function(t,e){for(var r in e)o.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(r,t),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(t){return this.options.writer.raw(this,this.options.writer.filterOptions(t))},r}(n)}).call(this)},28354:function(t,e,r){(function(){var e,n,o,i={}.hasOwnProperty;e=r(22360),o=r(21555),n=r(69932),t.exports=function(t){function r(t,e){this.stream=t,r.__super__.constructor.call(this,e)}return function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(r,t),r.prototype.endline=function(t,e,o){return t.isLastRootNode&&e.state===n.CloseTag?"":r.__super__.endline.call(this,t,e,o)},r.prototype.document=function(t,e){var r,n,o,i,s,a,l,p,c;for(n=o=0,s=(l=t.children).length;o<s;n=++o)(r=l[n]).isLastRootNode=n===t.children.length-1;for(e=this.filterOptions(e),c=[],i=0,a=(p=t.children).length;i<a;i++)r=p[i],c.push(this.writeChildNode(r,e,0));return c},r.prototype.attribute=function(t,e,n){return this.stream.write(r.__super__.attribute.call(this,t,e,n))},r.prototype.cdata=function(t,e,n){return this.stream.write(r.__super__.cdata.call(this,t,e,n))},r.prototype.comment=function(t,e,n){return this.stream.write(r.__super__.comment.call(this,t,e,n))},r.prototype.declaration=function(t,e,n){return this.stream.write(r.__super__.declaration.call(this,t,e,n))},r.prototype.docType=function(t,e,r){var o,i,s,a;if(r||(r=0),this.openNode(t,e,r),e.state=n.OpenTag,this.stream.write(this.indent(t,e,r)),this.stream.write("<!DOCTYPE "+t.root().name),t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),t.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(t,e,r)),e.state=n.InsideTag,i=0,s=(a=t.children).length;i<s;i++)o=a[i],this.writeChildNode(o,e,r+1);e.state=n.CloseTag,this.stream.write("]")}return e.state=n.CloseTag,this.stream.write(e.spaceBeforeSlash+">"),this.stream.write(this.endline(t,e,r)),e.state=n.None,this.closeNode(t,e,r)},r.prototype.element=function(t,r,o){var s,a,l,p,c,h,u,f,d;for(u in o||(o=0),this.openNode(t,r,o),r.state=n.OpenTag,this.stream.write(this.indent(t,r,o)+"<"+t.name),f=t.attribs)i.call(f,u)&&(s=f[u],this.attribute(s,r,o));if(p=0===(l=t.children.length)?null:t.children[0],0===l||t.children.every((function(t){return(t.type===e.Text||t.type===e.Raw)&&""===t.value})))r.allowEmpty?(this.stream.write(">"),r.state=n.CloseTag,this.stream.write("</"+t.name+">")):(r.state=n.CloseTag,this.stream.write(r.spaceBeforeSlash+"/>"));else if(!r.pretty||1!==l||p.type!==e.Text&&p.type!==e.Raw||null==p.value){for(this.stream.write(">"+this.endline(t,r,o)),r.state=n.InsideTag,c=0,h=(d=t.children).length;c<h;c++)a=d[c],this.writeChildNode(a,r,o+1);r.state=n.CloseTag,this.stream.write(this.indent(t,r,o)+"</"+t.name+">")}else this.stream.write(">"),r.state=n.InsideTag,r.suppressPrettyCount++,this.writeChildNode(p,r,o+1),r.suppressPrettyCount--,r.state=n.CloseTag,this.stream.write("</"+t.name+">");return this.stream.write(this.endline(t,r,o)),r.state=n.None,this.closeNode(t,r,o)},r.prototype.processingInstruction=function(t,e,n){return this.stream.write(r.__super__.processingInstruction.call(this,t,e,n))},r.prototype.raw=function(t,e,n){return this.stream.write(r.__super__.raw.call(this,t,e,n))},r.prototype.text=function(t,e,n){return this.stream.write(r.__super__.text.call(this,t,e,n))},r.prototype.dtdAttList=function(t,e,n){return this.stream.write(r.__super__.dtdAttList.call(this,t,e,n))},r.prototype.dtdElement=function(t,e,n){return this.stream.write(r.__super__.dtdElement.call(this,t,e,n))},r.prototype.dtdEntity=function(t,e,n){return this.stream.write(r.__super__.dtdEntity.call(this,t,e,n))},r.prototype.dtdNotation=function(t,e,n){return this.stream.write(r.__super__.dtdNotation.call(this,t,e,n))},r}(o)}).call(this)},67090:function(t,e,r){(function(){var e,n={}.hasOwnProperty;e=r(21555),t.exports=function(t){function e(t){e.__super__.constructor.call(this,t)}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.document=function(t,e){var r,n,o,i,s;for(e=this.filterOptions(e),i="",n=0,o=(s=t.children).length;n<o;n++)r=s[n],i+=this.writeChildNode(r,e,0);return e.pretty&&i.slice(-e.newline.length)===e.newline&&(i=i.slice(0,-e.newline.length)),i},e}(e)}).call(this)},77839:function(t){(function(){var e=function(t,e){return function(){return t.apply(e,arguments)}},r={}.hasOwnProperty;t.exports=function(){function t(t){var n,o,i;for(n in this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this),t||(t={}),this.options=t,this.options.version||(this.options.version="1.0"),o=t.stringify||{})r.call(o,n)&&(i=o[n],this[n]=i)}return t.prototype.name=function(t){return this.options.noValidation?t:this.assertLegalName(""+t||"")},t.prototype.text=function(t){return this.options.noValidation?t:this.assertLegalChar(this.textEscape(""+t||""))},t.prototype.cdata=function(t){return this.options.noValidation?t:(t=(t=""+t||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(t))},t.prototype.comment=function(t){if(this.options.noValidation)return t;if((t=""+t||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+t);return this.assertLegalChar(t)},t.prototype.raw=function(t){return this.options.noValidation?t:""+t||""},t.prototype.attValue=function(t){return this.options.noValidation?t:this.assertLegalChar(this.attEscape(t=""+t||""))},t.prototype.insTarget=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.insValue=function(t){if(this.options.noValidation)return t;if((t=""+t||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+t);return this.assertLegalChar(t)},t.prototype.xmlVersion=function(t){if(this.options.noValidation)return t;if(!(t=""+t||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+t);return t},t.prototype.xmlEncoding=function(t){if(this.options.noValidation)return t;if(!(t=""+t||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+t);return this.assertLegalChar(t)},t.prototype.xmlStandalone=function(t){return this.options.noValidation?t:t?"yes":"no"},t.prototype.dtdPubID=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.dtdSysID=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.dtdElementValue=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.dtdAttType=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.dtdAttDefault=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.dtdEntityValue=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.dtdNData=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.convertAttKey="@",t.prototype.convertPIKey="?",t.prototype.convertTextKey="#text",t.prototype.convertCDataKey="#cdata",t.prototype.convertCommentKey="#comment",t.prototype.convertRawKey="#raw",t.prototype.assertLegalChar=function(t){var e,r;if(this.options.noValidation)return t;if(e="","1.0"===this.options.version){if(e=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,r=t.match(e))throw new Error("Invalid character in string: "+t+" at index "+r.index)}else if("1.1"===this.options.version&&(e=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,r=t.match(e)))throw new Error("Invalid character in string: "+t+" at index "+r.index);return t},t.prototype.assertLegalName=function(t){var e;if(this.options.noValidation)return t;if(this.assertLegalChar(t),e=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!t.match(e))throw new Error("Invalid character in name");return t},t.prototype.textEscape=function(t){var e;return this.options.noValidation?t:(e=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},t.prototype.attEscape=function(t){var e;return this.options.noValidation?t:(e=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},t}()}).call(this)},4572:function(t,e,r){(function(){var e,n,o={}.hasOwnProperty;e=r(22360),n=r(33555),t.exports=function(t){function r(t,n){if(r.__super__.constructor.call(this,t),null==n)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=e.Text,this.value=this.stringify.text(n)}return function(t,e){for(var r in e)o.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(r,t),Object.defineProperty(r.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(r.prototype,"wholeText",{get:function(){var t,e,r;for(r="",e=this.previousSibling;e;)r=e.data+r,e=e.previousSibling;for(r+=this.data,t=this.nextSibling;t;)r+=t.data,t=t.nextSibling;return r}}),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(t){return this.options.writer.text(this,this.options.writer.filterOptions(t))},r.prototype.splitText=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.replaceWholeText=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r}(n)}).call(this)},21555:function(t,e,r){(function(){var e,n,o,i={}.hasOwnProperty;o=r(28022).assign,e=r(22360),r(62859),r(4749),r(79436),r(86963),r(78345),r(26322),r(4572),r(18170),r(65529),r(78573),r(4114),r(34523),r(47238),n=r(69932),t.exports=function(){function t(t){var e,r,n;for(e in t||(t={}),this.options=t,r=t.writer||{})i.call(r,e)&&(n=r[e],this["_"+e]=this[e],this[e]=n)}return t.prototype.filterOptions=function(t){var e,r,i,s,a,l,p,c;return t||(t={}),t=o({},this.options,t),(e={writer:this}).pretty=t.pretty||!1,e.allowEmpty=t.allowEmpty||!1,e.indent=null!=(r=t.indent)?r:"  ",e.newline=null!=(i=t.newline)?i:"\n",e.offset=null!=(s=t.offset)?s:0,e.dontPrettyTextNodes=null!=(a=null!=(l=t.dontPrettyTextNodes)?l:t.dontprettytextnodes)?a:0,e.spaceBeforeSlash=null!=(p=null!=(c=t.spaceBeforeSlash)?c:t.spacebeforeslash)?p:"",!0===e.spaceBeforeSlash&&(e.spaceBeforeSlash=" "),e.suppressPrettyCount=0,e.user={},e.state=n.None,e},t.prototype.indent=function(t,e,r){var n;return!e.pretty||e.suppressPrettyCount?"":e.pretty&&(n=(r||0)+e.offset+1)>0?new Array(n).join(e.indent):""},t.prototype.endline=function(t,e,r){return!e.pretty||e.suppressPrettyCount?"":e.newline},t.prototype.attribute=function(t,e,r){var n;return this.openAttribute(t,e,r),n=" "+t.name+'="'+t.value+'"',this.closeAttribute(t,e,r),n},t.prototype.cdata=function(t,e,r){var o;return this.openNode(t,e,r),e.state=n.OpenTag,o=this.indent(t,e,r)+"<![CDATA[",e.state=n.InsideTag,o+=t.value,e.state=n.CloseTag,o+="]]>"+this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),o},t.prototype.comment=function(t,e,r){var o;return this.openNode(t,e,r),e.state=n.OpenTag,o=this.indent(t,e,r)+"\x3c!-- ",e.state=n.InsideTag,o+=t.value,e.state=n.CloseTag,o+=" --\x3e"+this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),o},t.prototype.declaration=function(t,e,r){var o;return this.openNode(t,e,r),e.state=n.OpenTag,o=this.indent(t,e,r)+"<?xml",e.state=n.InsideTag,o+=' version="'+t.version+'"',null!=t.encoding&&(o+=' encoding="'+t.encoding+'"'),null!=t.standalone&&(o+=' standalone="'+t.standalone+'"'),e.state=n.CloseTag,o+=e.spaceBeforeSlash+"?>",o+=this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),o},t.prototype.docType=function(t,e,r){var o,i,s,a,l;if(r||(r=0),this.openNode(t,e,r),e.state=n.OpenTag,a=this.indent(t,e,r),a+="<!DOCTYPE "+t.root().name,t.pubID&&t.sysID?a+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(a+=' SYSTEM "'+t.sysID+'"'),t.children.length>0){for(a+=" [",a+=this.endline(t,e,r),e.state=n.InsideTag,i=0,s=(l=t.children).length;i<s;i++)o=l[i],a+=this.writeChildNode(o,e,r+1);e.state=n.CloseTag,a+="]"}return e.state=n.CloseTag,a+=e.spaceBeforeSlash+">",a+=this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),a},t.prototype.element=function(t,r,o){var s,a,l,p,c,h,u,f,d,y,m,g,b,w;for(d in o||(o=0),y=!1,m="",this.openNode(t,r,o),r.state=n.OpenTag,m+=this.indent(t,r,o)+"<"+t.name,g=t.attribs)i.call(g,d)&&(s=g[d],m+=this.attribute(s,r,o));if(p=0===(l=t.children.length)?null:t.children[0],0===l||t.children.every((function(t){return(t.type===e.Text||t.type===e.Raw)&&""===t.value})))r.allowEmpty?(m+=">",r.state=n.CloseTag,m+="</"+t.name+">"+this.endline(t,r,o)):(r.state=n.CloseTag,m+=r.spaceBeforeSlash+"/>"+this.endline(t,r,o));else if(!r.pretty||1!==l||p.type!==e.Text&&p.type!==e.Raw||null==p.value){if(r.dontPrettyTextNodes)for(c=0,u=(b=t.children).length;c<u;c++)if(((a=b[c]).type===e.Text||a.type===e.Raw)&&null!=a.value){r.suppressPrettyCount++,y=!0;break}for(m+=">"+this.endline(t,r,o),r.state=n.InsideTag,h=0,f=(w=t.children).length;h<f;h++)a=w[h],m+=this.writeChildNode(a,r,o+1);r.state=n.CloseTag,m+=this.indent(t,r,o)+"</"+t.name+">",y&&r.suppressPrettyCount--,m+=this.endline(t,r,o),r.state=n.None}else m+=">",r.state=n.InsideTag,r.suppressPrettyCount++,y=!0,m+=this.writeChildNode(p,r,o+1),r.suppressPrettyCount--,y=!1,r.state=n.CloseTag,m+="</"+t.name+">"+this.endline(t,r,o);return this.closeNode(t,r,o),m},t.prototype.writeChildNode=function(t,r,n){switch(t.type){case e.CData:return this.cdata(t,r,n);case e.Comment:return this.comment(t,r,n);case e.Element:return this.element(t,r,n);case e.Raw:return this.raw(t,r,n);case e.Text:return this.text(t,r,n);case e.ProcessingInstruction:return this.processingInstruction(t,r,n);case e.Dummy:return"";case e.Declaration:return this.declaration(t,r,n);case e.DocType:return this.docType(t,r,n);case e.AttributeDeclaration:return this.dtdAttList(t,r,n);case e.ElementDeclaration:return this.dtdElement(t,r,n);case e.EntityDeclaration:return this.dtdEntity(t,r,n);case e.NotationDeclaration:return this.dtdNotation(t,r,n);default:throw new Error("Unknown XML node type: "+t.constructor.name)}},t.prototype.processingInstruction=function(t,e,r){var o;return this.openNode(t,e,r),e.state=n.OpenTag,o=this.indent(t,e,r)+"<?",e.state=n.InsideTag,o+=t.target,t.value&&(o+=" "+t.value),e.state=n.CloseTag,o+=e.spaceBeforeSlash+"?>",o+=this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),o},t.prototype.raw=function(t,e,r){var o;return this.openNode(t,e,r),e.state=n.OpenTag,o=this.indent(t,e,r),e.state=n.InsideTag,o+=t.value,e.state=n.CloseTag,o+=this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),o},t.prototype.text=function(t,e,r){var o;return this.openNode(t,e,r),e.state=n.OpenTag,o=this.indent(t,e,r),e.state=n.InsideTag,o+=t.value,e.state=n.CloseTag,o+=this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),o},t.prototype.dtdAttList=function(t,e,r){var o;return this.openNode(t,e,r),e.state=n.OpenTag,o=this.indent(t,e,r)+"<!ATTLIST",e.state=n.InsideTag,o+=" "+t.elementName+" "+t.attributeName+" "+t.attributeType,"#DEFAULT"!==t.defaultValueType&&(o+=" "+t.defaultValueType),t.defaultValue&&(o+=' "'+t.defaultValue+'"'),e.state=n.CloseTag,o+=e.spaceBeforeSlash+">"+this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),o},t.prototype.dtdElement=function(t,e,r){var o;return this.openNode(t,e,r),e.state=n.OpenTag,o=this.indent(t,e,r)+"<!ELEMENT",e.state=n.InsideTag,o+=" "+t.name+" "+t.value,e.state=n.CloseTag,o+=e.spaceBeforeSlash+">"+this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),o},t.prototype.dtdEntity=function(t,e,r){var o;return this.openNode(t,e,r),e.state=n.OpenTag,o=this.indent(t,e,r)+"<!ENTITY",e.state=n.InsideTag,t.pe&&(o+=" %"),o+=" "+t.name,t.value?o+=' "'+t.value+'"':(t.pubID&&t.sysID?o+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(o+=' SYSTEM "'+t.sysID+'"'),t.nData&&(o+=" NDATA "+t.nData)),e.state=n.CloseTag,o+=e.spaceBeforeSlash+">"+this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),o},t.prototype.dtdNotation=function(t,e,r){var o;return this.openNode(t,e,r),e.state=n.OpenTag,o=this.indent(t,e,r)+"<!NOTATION",e.state=n.InsideTag,o+=" "+t.name,t.pubID&&t.sysID?o+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.pubID?o+=' PUBLIC "'+t.pubID+'"':t.sysID&&(o+=' SYSTEM "'+t.sysID+'"'),e.state=n.CloseTag,o+=e.spaceBeforeSlash+">"+this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),o},t.prototype.openNode=function(t,e,r){},t.prototype.closeNode=function(t,e,r){},t.prototype.openAttribute=function(t,e,r){},t.prototype.closeAttribute=function(t,e,r){},t}()}).call(this)},86195:function(t,e,r){(function(){var e,n,o,i,s,a,l,p,c,h;h=r(28022),p=h.assign,c=h.isFunction,o=r(94588),i=r(82229),s=r(65157),l=r(67090),a=r(28354),e=r(22360),n=r(69932),t.exports.create=function(t,e,r,n){var o,s;if(null==t)throw new Error("Root element needs a name.");return n=p({},e,r,n),s=(o=new i(n)).element(t),n.headless||(o.declaration(n),null==n.pubID&&null==n.sysID||o.dtd(n)),s},t.exports.begin=function(t,e,r){var n;return c(t)&&(e=(n=[t,e])[0],r=n[1],t={}),e?new s(t,e,r):new i(t)},t.exports.stringWriter=function(t){return new l(t)},t.exports.streamWriter=function(t,e){return new a(t,e)},t.exports.implementation=new o,t.exports.nodeType=e,t.exports.writerState=n}).call(this)}}]);