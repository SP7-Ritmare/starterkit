(self.webpackChunkSOSPlugin=self.webpackChunkSOSPlugin||[]).push([[611],{11611:(t,n,e)=>{"use strict";e.r(n),e.d(n,{default:()=>m});var c=e(84956),r=e.n(c),o=e(88042),l=e.n(o),i=e(44142),a=e.n(i);function s(t){const n={"==":"===",">":">",">=":">=","<":"<","<=":"<=","!=":"!==","*=":"=~"},[e,...c]=t;switch(e){case"||":case"&&":return"(".concat(c.map((t=>s(t))).join(" ".concat(e," ")),")");case">":case"<":case">=":case"<=":case"!=":case"==":case"*=":const[t,r]=c;return function(t,n,e){const c="!(${".concat(t,"} === undefined").concat(null===e?"":" || ${".concat(t,"} === null"),")");return"=~"===n?"(".concat(c," && regExp('").concat(e,"').test(${").concat(t,"}) === true)"):"(".concat(c," && ${").concat(t,"} ").concat(n," ").concat(l()(e)?"'".concat(e,"'"):e,")")}(t,n[e],r);default:return""}}function u(t){return!t||s(t)}function f(t){let{conditions:n}=t;return 1===n.length&&!0===n[0][0]?n[0][1]:{conditions:n}}function d(t){if(/rgb\(|rgba\(|hsl\(|hsla\(/.test(t)){const n=a()(t);return{color:n.toHexString(),fillOpacity:n.getAlpha()}}if(/color\(/.test(t)){const[n,e]=t.replace(/color\(|\)/g,"").split(",");return{color:n.replace(/\'/g,""),fillOpacity:parseFloat(void 0!==e?e:1)}}return{color:"#ffffff",fillOpacity:1}}const m=class{readStyle(t){return new Promise(((n,e)=>{try{const e=function(){var t;let{color:n,pointSize:e,meta:c}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=null!=c&&c.names?r()(c.names,"'").split(","):[],i=l()(n)?[{filter:void 0,name:o[0]||"",symbolizers:[{kind:e?"Mark":"Fill",...d(n)}]}]:null==n||null===(t=n.conditions)||void 0===t?void 0:t.map(((t,n)=>{const c=t[1];return{filter:void 0,name:o[n]||"",symbolizers:[{kind:e?"Mark":"Fill",...d(c)}]}}));return{name:null!=c&&c.title?r()(c.title,"'"):"",rules:[...i].reverse()}}(t);n(e)}catch(t){e(t)}}))}writeStyle(t){return new Promise(((n,e)=>{try{const e=function(){let{name:t,rules:n=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=[...n].reverse(),c=e.find((t=>{let{symbolizers:n}=t;return"Mark"===n[0].kind})),r=e.map((t=>{let{filter:n,symbolizers:e}=t;return[u(n),c&&0===(e[0].fillOpacity||0)?"${COLOR}":"color('".concat(e[0].color,"', ").concat(e[0].fillOpacity,")")]})),o=r.find((t=>{let[n]=t;return!0===n})),l=!o&&{show:r.filter((t=>!0!==t)).map((t=>{let[n]=t;return n})).join(" || ")},i=e.map((t=>{let{filter:n,symbolizers:e}=t;return[u(n),e[0].radius||1]})),a=e.map((t=>{let{name:n}=t;return n})),s=!!a.find((t=>!!t));return{...l,color:f({conditions:o?r:[...r,[!0,"color('#ffffff', 1)"]]}),...c&&{pointSize:f({conditions:o?i:[...i,[!0,1]]})},...(t||s)&&{meta:{...t&&{title:"'".concat(t,"'")},...s&&{names:"'".concat(a.join(","),"'")}}}}}(t);n(e)}catch(t){e(t)}}))}}}}]);